(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["stripe-payment"],{

/***/ "/TfR":
/*!******************************************************************************************************************************************************!*\
  !*** /home/felix/PhpstormProjects/shopware-6/plugins/ShopwareStripePayment/src/Resources/storefront/card-selection/stripe-payment.card-selection.js ***!
  \******************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return StripePaymentCardSelection; });\n/* harmony import */ var src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/script/service/http-client.service */ \"k8s9\");\n/* harmony import */ var src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/script/plugin-system/plugin.class */ \"FGIj\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable import/no-unresolved */\n\n\n\nvar StripePaymentCardSelection =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(StripePaymentCardSelection, _Plugin);\n\n  function StripePaymentCardSelection() {\n    _classCallCheck(this, StripePaymentCardSelection);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(StripePaymentCardSelection).apply(this, arguments));\n  }\n\n  _createClass(StripePaymentCardSelection, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this._client = new src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"](window.accessKey, window.contextToken);\n      this.stripeElements = [];\n      this.invalidFields = [];\n      this.options = _extends(StripePaymentCardSelection.options, this.options || {});\n      /* eslint-disable no-undef */\n\n      this.stripeClient = Stripe(this.options.stripePublicKey); // Save config\n\n      this.setSelectedCard(this.options.selectedCard); // Setup form on payment method changes\n\n      var paymentMethodElements = document.querySelectorAll('input.payment-method-input');\n      paymentMethodElements.forEach(function (element) {\n        element.addEventListener('change', function () {\n          _this.setupForm();\n        });\n      });\n      this.setupForm();\n    }\n    /**\n     * Saves the given card and removes all hidden Stripe fields from the form. If the card exists, its ID as well as\n     * its encoded data are added to the form as hidden fields.\n     *\n     * @param card A Stripe card object.\n     */\n\n  }, {\n    key: \"setSelectedCard\",\n    value: function setSelectedCard(card) {\n      this.selectedCard = card;\n\n      if (this.selectedCard) {\n        this.selectedCardChanged = true;\n      }\n    }\n    /**\n     * Sets up the payment form by first unounting all Stripe elements that might be already mounted to the DOM and\n     * clearing all validation errors. Then, if a stripe card payment method is selected, mounts new Stripe Elements\n     * fields to the form and adds some observers to other fields as well as the form.\n     */\n\n  }, {\n    key: \"setupForm\",\n    value: function setupForm() {\n      // Reset form\n      this.unmountStripeElements();\n      this.invalidFields = [];\n      this.updateValidationErrors();\n\n      if (this.getActiveStripeCardForm()) {\n        this.getStripeCardForm().show(); // Mount Stripe form fields again to the now active form and add other observers\n\n        this.mountStripeElements();\n        this.observeForm(); // Make sure the card selection matches the internal state\n\n        if (this.selectedCard) {\n          this.formEl('.stripe-saved-cards').val(this.selectedCard.id);\n        }\n\n        this.formEl('.stripe-saved-cards').trigger('change');\n      } else {\n        this.removeFormListeners();\n        this.getStripeCardForm().hide();\n      }\n    }\n    /**\n     * Creates the Stripe Elements fields for card number, expiry and CVC and mounts them to their resepctive nodes in\n     * the active Stripe card payment form.\n     */\n\n  }, {\n    key: \"mountStripeElements\",\n    value: function mountStripeElements() {\n      // Define options to apply to all fields when creating them\n      var cardHolderFieldEl = this.formEl('.stripe-card-holder');\n      var defaultOptions = {\n        style: {\n          base: {\n            color: cardHolderFieldEl.css('color'),\n            fontFamily: cardHolderFieldEl.css('font-family'),\n            fontSize: cardHolderFieldEl.css('font-size'),\n            fontWeight: cardHolderFieldEl.css('font-weight'),\n            lineHeight: cardHolderFieldEl.css('line-height')\n          }\n        }\n      }; // Define a closure to create all elements using the same 'Elements' instance\n\n      var elements = this.stripeClient.elements();\n      var me = this;\n\n      var createAndMountStripeElement = function createAndMountStripeElement(type, mountSelector) {\n        // Create the element and add the change listener\n        var element = elements.create(type, defaultOptions);\n        element.on('change', function (event) {\n          if (event.error && event.error.type === 'validation_error') {\n            me.markFieldInvalid(type, event.error.code, event.error.message);\n            $(mountSelector).addClass('is-invalid');\n          } else {\n            me.markFieldValid(type);\n            $(mountSelector).removeClass('is-invalid');\n          }\n        }); // Mount it to the DOM\n\n        var mountElement = me.formEl(mountSelector).get(0);\n        element.mount(mountElement);\n        return element;\n      }; // Create all elements\n\n\n      this.stripeElements = [createAndMountStripeElement('cardNumber', '.stripe-element-card-number'), createAndMountStripeElement('cardExpiry', '.stripe-element-card-expiry'), createAndMountStripeElement('cardCvc', '.stripe-element-card-cvc')];\n    }\n    /**\n     * Unmounts all existing Stripe elements from the Stripe card payment form they are currently mounted to.\n     */\n\n  }, {\n    key: \"unmountStripeElements\",\n    value: function unmountStripeElements() {\n      this.stripeElements.forEach(function (element) {\n        return element.unmount();\n      });\n      this.stripeElements = [];\n    }\n    /**\n     * Checks the list of invalid fields for any entries and, if found, joins them to an error message, which is then\n     * displayed in the error box. If no invalid fields are found, the error box is hidden.\n     */\n\n  }, {\n    key: \"updateValidationErrors\",\n    value: function updateValidationErrors() {\n      var _this2 = this;\n\n      var errorBox = this.formEl('.stripe-payment-validation-error-box');\n      var boxContent = errorBox.find('.alert-content');\n      boxContent.empty();\n\n      if (Object.keys(this.invalidFields).length > 0) {\n        // Update the error box message and make it visible\n        var listEl = $('<ul></ul>').addClass('alert-list').appendTo(boxContent);\n        Object.keys(this.invalidFields).forEach(function (key) {\n          $('<li></li>').text(_this2.invalidFields[key]).appendTo(listEl);\n        });\n        errorBox.show();\n      } else {\n        errorBox.hide();\n      }\n    }\n    /**\n     * Adds change listeners to the card selection and card holder field as well as a submission listener on the main\n     * payment form.\n     */\n\n  }, {\n    key: \"observeForm\",\n    value: function observeForm() {\n      // Add listeners\n      this.findForm().on('submit', {\n        scope: this\n      }, this.onFormSubmission);\n      this.formEl('.stripe-saved-cards').on('change', {\n        scope: this\n      }, this.onCardSelectionChange); // Save the current value and add listener\n\n      var cardHolderElem = this.formEl('.stripe-card-holder');\n      cardHolderElem.data('oldVal', cardHolderElem.val());\n      cardHolderElem.on('propertychange keyup input paste', {\n        scope: this\n      }, this.onCardHolderChange);\n    }\n  }, {\n    key: \"removeFormListeners\",\n    value: function removeFormListeners() {\n      this.findForm().off('submit', this.onFormSubmission);\n      this.formEl('.stripe-saved-cards').off('change', this.onCardSelectionChange);\n      this.formEl('.stripe-card-holder').off('propertychange keyup input paste', this.onCardHolderChange);\n    }\n    /**\n     * Removes all validation errors for the field with the given 'fieldId' and triggers an update of the displayed\n     * validation errors.\n     *\n     * @param String fieldId\n     */\n\n  }, {\n    key: \"markFieldValid\",\n    value: function markFieldValid(fieldId) {\n      delete this.invalidFields[fieldId];\n      this.updateValidationErrors();\n    }\n    /**\n     * Determines the error message based on the given 'errorCode' and 'message' and triggers\n     * an update of the displayed validation errors.\n     *\n     * @param fieldId\n     * @param errorCode (optional) The code used to find a localised error message.\n     * @param message (optioanl) The fallback error message used in case no 'errorCode' is provided or no respective, localised description exists.\n     */\n\n  }, {\n    key: \"markFieldInvalid\",\n    value: function markFieldInvalid(fieldId, errorCode, message) {\n      // TODO: add localized error with snippets if avail\n      this.invalidFields[fieldId] = message || 'Unknown error';\n      this.updateValidationErrors();\n    }\n    /**\n     * First validates the form and payment state and, if the main form can be submitted, does nothing further.\n     * If however the main form cannot be submitted, because no card is selected (or no token was created), a new Stripe\n     * card and token are generated using the entered card data and saved in the form, before the submission is\n     * triggered again.\n     *\n     * @param event\n     */\n\n  }, {\n    key: \"onFormSubmission\",\n    value: function onFormSubmission(event) {\n      var me = event.data.scope;\n      var form = $(this); // Not the currently selected payment method\n\n      if (!me.getActiveStripeCardForm()) {\n        return undefined;\n      } // Check if a token/card was generated and hence the form can be submitted\n\n\n      if (me.selectedCard) {\n        if (!me.selectedCardChanged) {\n          return undefined;\n        }\n\n        me.unmountStripeElements();\n        event.preventDefault();\n\n        me._client.post(me.options.persistUrl, JSON.stringify({\n          card: me.selectedCard\n        }), function (res) {\n          var result = JSON.parse(res);\n\n          if (!result.success) {\n            return;\n          }\n\n          me.selectedCardChanged = null; // Submit the form again to finish the payment process\n\n          form.submit();\n        });\n\n        return;\n      } // Prevent the form from being submitted until a new Stripe token is generated and received\n\n\n      event.preventDefault(); // Check for invalid fields\n\n      if (Object.keys(me.invalidFields).length > 0) {\n        return;\n      } // Send the credit card information to Stripe\n\n\n      me.setSubmitButtonsLoading();\n      me.stripeClient.createPaymentMethod('card', me.stripeElements[0], {\n        billing_details: {\n          name: me.formEl('.stripe-card-holder').val()\n        }\n      }).then(function (result) {\n        if (result.error) {\n          // Only reset the submit buttons in case of an error, because otherwise the form is submitted again\n          // right aways and hence we want the buttons to stay disabled\n          me.resetSubmitButtons(); // Display the error\n\n          me.handleStripeError(result.error);\n        } else {\n          // Save the card information\n          var card = result.paymentMethod.card;\n          card.id = result.paymentMethod.id;\n          card.name = me.formEl('.stripe-card-holder').val();\n          me.setSelectedCard(card); // Save whether to save the credit card for future checkouts\n\n          var saveCard = me.formEl('.stripe-save-card').is(':checked');\n\n          try {\n            me._client.post(me.options.persistUrl, JSON.stringify({\n              card: card,\n              saveCard: saveCard\n            }), function (res) {\n              var result = JSON.parse(res);\n\n              if (!result.success) {\n                return;\n              } // Submit the form again to finish the payment process\n\n\n              form.submit();\n            });\n          } catch (err) {\n            /* eslint-disable no-debugger */\n            debugger;\n          }\n        }\n      });\n    }\n    /**\n     * Adds a subscriber to the card holder form field that is fired when its value is changed to validate the\n     * entered value.\n     *\n     * @param Object event\n     */\n\n  }, {\n    key: \"onCardHolderChange\",\n    value: function onCardHolderChange(event) {\n      var me = event.data.scope;\n      var elem = $(this); // Check if value has changed\n\n      if (elem.data('oldVal') === elem.val()) {\n        return;\n      }\n\n      elem.data('oldVal', elem.val()); // Validate the field\n\n      if (elem.val().trim().length === 0) {\n        elem.addClass('is-invalid');\n        me.markFieldInvalid('cardHolder', 'invalid_card_holder');\n      } else {\n        elem.removeClass('is-invalid');\n        me.markFieldValid('cardHolder');\n      }\n    }\n    /**\n     * Adds a change observer to the card selection field. If an existing card is selected, all form fields are hidden\n     * and the card's Stripe information is added to the form. If the 'new' option is selected, all fields made visible\n     * and the Stripe card info is removed from the form.\n     *\n     * @param Object event\n     */\n\n  }, {\n    key: \"onCardSelectionChange\",\n    value: function onCardSelectionChange(event) {\n      var me = event.data.scope;\n      var elem = $(this);\n\n      if (elem.val() === 'new') {\n        // A new, empty card was selected\n        me.setSelectedCard(null); // Make validation errors visible\n\n        me.updateValidationErrors(); // Show the save check box\n\n        me.formEl('.stripe-card-field').show();\n        me.formEl('.stripe-card-row').show();\n        me.formEl('.stripe-save-card').show().prop('checked', true);\n        return;\n      } // Find the selected card\n\n\n      for (var i = 0; i < me.options.availableCards.length; i++) {\n        var selectedCard = me.options.availableCards[i];\n\n        if (selectedCard.id !== elem.val()) {\n          continue;\n        } // Save the card\n\n\n        me.setSelectedCard(selectedCard); // Hide validation errors\n\n        me.formEl('.stripe-payment-validation-error-box').hide(); // Hide all card fields\n\n        me.formEl('.stripe-card-field').hide();\n        me.formEl('.stripe-card-row').hide();\n        me.formEl('.stripe-save-card').hide();\n        break;\n      }\n    }\n    /**\n     * Finds both submit buttons on the page and adds the 'disabled' attribute as well as the loading indicator to each\n     * of them.\n     */\n\n  }, {\n    key: \"setSubmitButtonsLoading\",\n    value: function setSubmitButtonsLoading() {\n      // Reset the button first to prevent it from being added multiple loading indicators\n      this.resetSubmitButtons();\n      $('#confirmPaymentForm button[type=\"submit\"], .confirm--actions button[form=\"confirmPaymentForm\"]').each(function () {\n        $(this).html($(this).text() + '<div class=\"loader\" role=\"status\" style=\"position: relative;top: 4px\"><span class=\"sr-only\">Loading...</span></div>').attr('disabled', 'disabled');\n      });\n    }\n    /**\n     * Finds both submit buttons on the page and resets them by removing the 'disabled' attribute as well as the\n     * loading indicator.\n     */\n\n  }, {\n    key: \"resetSubmitButtons\",\n    value: function resetSubmitButtons() {\n      $('#confirmPaymentForm button[type=\"submit\"], .confirm--actions button[form=\"confirmPaymentForm\"]').each(function () {\n        $(this).removeAttr('disabled').find('.loader').remove();\n      });\n    }\n    /**\n     * Sets the translated error message in the general error box.\n     *\n     * @param stripeError\n     */\n\n  }, {\n    key: \"handleStripeError\",\n    value: function handleStripeError(stripeError) {\n      var messageToDisplay = this.options.snippets.error[stripeError.code || ''] || stripeError.message || 'Unknown error';\n      this.formEl('.stripe-payment-error-box').show().find('.alert-content').html(\"\".concat(this.options.snippets.error, \": \").concat(messageToDisplay));\n    }\n    /**\n     * Tries to find a stripe card form for the currently active payment method. That is, if a stripe card payment\n     * method is selected, its form is returned, otherwise returns null.\n     *\n     * @return jQuery|null\n     */\n\n  }, {\n    key: \"getActiveStripeCardForm\",\n    value: function getActiveStripeCardForm() {\n      var form = $('input[id^=\"paymentMethod\"]:checked').closest('.payment-method').find('.stripe-payment-card-form');\n      return form.length > 0 ? form.first() : null;\n    }\n  }, {\n    key: \"getStripeCardForm\",\n    value: function getStripeCardForm() {\n      var form = $('input[id^=\"paymentMethod\"]').closest('.payment-method').find('.stripe-payment-card-form');\n      return form.length > 0 ? form.first() : null;\n    }\n    /**\n     * Applies a jQuery query on the DOM tree under the active stripe card form using the given selector. This method\n     * should be used when selecting any fields that are part of a Stripe card payment form. If no Stripe card form is\n     * active, an empty query result is returned.\n     *\n     * @param String selector\n     * @return jQuery\n     */\n\n  }, {\n    key: \"formEl\",\n    value: function formEl(selector) {\n      var form = this.getActiveStripeCardForm();\n      return form ? form.find(selector) : $('stripe_payment_card_not_found');\n    }\n    /**\n     * @return jQuery The main payment selection form element.\n     */\n\n  }, {\n    key: \"findForm\",\n    value: function findForm() {\n      return $('#confirmPaymentForm');\n    }\n  }]);\n\n  return StripePaymentCardSelection;\n}(src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n_defineProperty(StripePaymentCardSelection, \"options\", {\n  /**\n   * @type string\n   */\n  stripePublicKey: '',\n  selectedCard: null,\n  availableCards: [],\n  snippets: {}\n});\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! /home/felix/PhpstormProjects/shopware-6/shopware-development/vendor/shopware/platform/src/Storefront/Resources/node_modules/jquery/dist/jquery.slim.js */ \"wpjq\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1RmUi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vaG9tZS9mZWxpeC9QaHBzdG9ybVByb2plY3RzL3Nob3B3YXJlLTYvcGx1Z2lucy9TaG9wd2FyZVN0cmlwZVBheW1lbnQvc3JjL1Jlc291cmNlcy9zdG9yZWZyb250L2NhcmQtc2VsZWN0aW9uL3N0cmlwZS1wYXltZW50LmNhcmQtc2VsZWN0aW9uLmpzP2JhMTciXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLXVucmVzb2x2ZWQgKi9cblxuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnc3JjL3NjcmlwdC9zZXJ2aWNlL2h0dHAtY2xpZW50LnNlcnZpY2UnO1xuaW1wb3J0IFBsdWdpbiBmcm9tICdzcmMvc2NyaXB0L3BsdWdpbi1zeXN0ZW0vcGx1Z2luLmNsYXNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlUGF5bWVudENhcmRTZWxlY3Rpb24gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHN0YXRpYyBvcHRpb25zID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBzdHJpcGVQdWJsaWNLZXk6ICcnLFxuXG4gICAgICAgIHNlbGVjdGVkQ2FyZDogbnVsbCxcblxuICAgICAgICBhdmFpbGFibGVDYXJkczogW10sXG5cbiAgICAgICAgc25pcHBldHM6IHt9LFxuICAgIH07XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBuZXcgSHR0cENsaWVudCh3aW5kb3cuYWNjZXNzS2V5LCB3aW5kb3cuY29udGV4dFRva2VuKTtcbiAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmludmFsaWRGaWVsZHMgPSBbXTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKFN0cmlwZVBheW1lbnRDYXJkU2VsZWN0aW9uLm9wdGlvbnMsIHRoaXMub3B0aW9ucyB8fCB7fSk7XG5cbiAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYgKi9cbiAgICAgICAgdGhpcy5zdHJpcGVDbGllbnQgPSBTdHJpcGUodGhpcy5vcHRpb25zLnN0cmlwZVB1YmxpY0tleSk7XG4gICAgICAgIC8vIFNhdmUgY29uZmlnXG4gICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRDYXJkKHRoaXMub3B0aW9ucy5zZWxlY3RlZENhcmQpO1xuXG4gICAgICAgIC8vIFNldHVwIGZvcm0gb24gcGF5bWVudCBtZXRob2QgY2hhbmdlc1xuICAgICAgICBjb25zdCBwYXltZW50TWV0aG9kRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dC5wYXltZW50LW1ldGhvZC1pbnB1dCcpO1xuICAgICAgICBwYXltZW50TWV0aG9kRWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBGb3JtKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXR1cEZvcm0oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyB0aGUgZ2l2ZW4gY2FyZCBhbmQgcmVtb3ZlcyBhbGwgaGlkZGVuIFN0cmlwZSBmaWVsZHMgZnJvbSB0aGUgZm9ybS4gSWYgdGhlIGNhcmQgZXhpc3RzLCBpdHMgSUQgYXMgd2VsbCBhc1xuICAgICAqIGl0cyBlbmNvZGVkIGRhdGEgYXJlIGFkZGVkIHRvIHRoZSBmb3JtIGFzIGhpZGRlbiBmaWVsZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FyZCBBIFN0cmlwZSBjYXJkIG9iamVjdC5cbiAgICAgKi9cbiAgICBzZXRTZWxlY3RlZENhcmQoY2FyZCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2FyZCA9IGNhcmQ7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ2FyZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENhcmRDaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdXAgdGhlIHBheW1lbnQgZm9ybSBieSBmaXJzdCB1bm91bnRpbmcgYWxsIFN0cmlwZSBlbGVtZW50cyB0aGF0IG1pZ2h0IGJlIGFscmVhZHkgbW91bnRlZCB0byB0aGUgRE9NIGFuZFxuICAgICAqIGNsZWFyaW5nIGFsbCB2YWxpZGF0aW9uIGVycm9ycy4gVGhlbiwgaWYgYSBzdHJpcGUgY2FyZCBwYXltZW50IG1ldGhvZCBpcyBzZWxlY3RlZCwgbW91bnRzIG5ldyBTdHJpcGUgRWxlbWVudHNcbiAgICAgKiBmaWVsZHMgdG8gdGhlIGZvcm0gYW5kIGFkZHMgc29tZSBvYnNlcnZlcnMgdG8gb3RoZXIgZmllbGRzIGFzIHdlbGwgYXMgdGhlIGZvcm0uXG4gICAgICovXG4gICAgc2V0dXBGb3JtKCkge1xuICAgICAgICAvLyBSZXNldCBmb3JtXG4gICAgICAgIHRoaXMudW5tb3VudFN0cmlwZUVsZW1lbnRzKCk7XG4gICAgICAgIHRoaXMuaW52YWxpZEZpZWxkcyA9IFtdO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbGlkYXRpb25FcnJvcnMoKTtcblxuICAgICAgICBpZiAodGhpcy5nZXRBY3RpdmVTdHJpcGVDYXJkRm9ybSgpKSB7XG4gICAgICAgICAgICB0aGlzLmdldFN0cmlwZUNhcmRGb3JtKCkuc2hvdygpO1xuICAgICAgICAgICAgLy8gTW91bnQgU3RyaXBlIGZvcm0gZmllbGRzIGFnYWluIHRvIHRoZSBub3cgYWN0aXZlIGZvcm0gYW5kIGFkZCBvdGhlciBvYnNlcnZlcnNcbiAgICAgICAgICAgIHRoaXMubW91bnRTdHJpcGVFbGVtZW50cygpO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlRm9ybSgpO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIGNhcmQgc2VsZWN0aW9uIG1hdGNoZXMgdGhlIGludGVybmFsIHN0YXRlXG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZENhcmQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1jYXJkcycpLnZhbCh0aGlzLnNlbGVjdGVkQ2FyZC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1jYXJkcycpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVGb3JtTGlzdGVuZXJzKCk7XG4gICAgICAgICAgICB0aGlzLmdldFN0cmlwZUNhcmRGb3JtKCkuaGlkZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgU3RyaXBlIEVsZW1lbnRzIGZpZWxkcyBmb3IgY2FyZCBudW1iZXIsIGV4cGlyeSBhbmQgQ1ZDIGFuZCBtb3VudHMgdGhlbSB0byB0aGVpciByZXNlcGN0aXZlIG5vZGVzIGluXG4gICAgICogdGhlIGFjdGl2ZSBTdHJpcGUgY2FyZCBwYXltZW50IGZvcm0uXG4gICAgICovXG4gICAgbW91bnRTdHJpcGVFbGVtZW50cygpIHtcbiAgICAgICAgLy8gRGVmaW5lIG9wdGlvbnMgdG8gYXBwbHkgdG8gYWxsIGZpZWxkcyB3aGVuIGNyZWF0aW5nIHRoZW1cbiAgICAgICAgY29uc3QgY2FyZEhvbGRlckZpZWxkRWwgPSB0aGlzLmZvcm1FbCgnLnN0cmlwZS1jYXJkLWhvbGRlcicpO1xuICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgYmFzZToge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogY2FyZEhvbGRlckZpZWxkRWwuY3NzKCdjb2xvcicpLFxuICAgICAgICAgICAgICAgICAgICBmb250RmFtaWx5OiBjYXJkSG9sZGVyRmllbGRFbC5jc3MoJ2ZvbnQtZmFtaWx5JyksXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiBjYXJkSG9sZGVyRmllbGRFbC5jc3MoJ2ZvbnQtc2l6ZScpLFxuICAgICAgICAgICAgICAgICAgICBmb250V2VpZ2h0OiBjYXJkSG9sZGVyRmllbGRFbC5jc3MoJ2ZvbnQtd2VpZ2h0JyksXG4gICAgICAgICAgICAgICAgICAgIGxpbmVIZWlnaHQ6IGNhcmRIb2xkZXJGaWVsZEVsLmNzcygnbGluZS1oZWlnaHQnKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBEZWZpbmUgYSBjbG9zdXJlIHRvIGNyZWF0ZSBhbGwgZWxlbWVudHMgdXNpbmcgdGhlIHNhbWUgJ0VsZW1lbnRzJyBpbnN0YW5jZVxuICAgICAgICBjb25zdCBlbGVtZW50cyA9IHRoaXMuc3RyaXBlQ2xpZW50LmVsZW1lbnRzKCk7XG4gICAgICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICAgICAgY29uc3QgY3JlYXRlQW5kTW91bnRTdHJpcGVFbGVtZW50ID0gZnVuY3Rpb24odHlwZSwgbW91bnRTZWxlY3Rvcikge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBlbGVtZW50IGFuZCBhZGQgdGhlIGNoYW5nZSBsaXN0ZW5lclxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmNyZWF0ZSh0eXBlLCBkZWZhdWx0T3B0aW9ucyk7XG4gICAgICAgICAgICBlbGVtZW50Lm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5lcnJvciAmJiBldmVudC5lcnJvci50eXBlID09PSAndmFsaWRhdGlvbl9lcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUubWFya0ZpZWxkSW52YWxpZCh0eXBlLCBldmVudC5lcnJvci5jb2RlLCBldmVudC5lcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgJChtb3VudFNlbGVjdG9yKS5hZGRDbGFzcygnaXMtaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLm1hcmtGaWVsZFZhbGlkKHR5cGUpO1xuICAgICAgICAgICAgICAgICAgICAkKG1vdW50U2VsZWN0b3IpLnJlbW92ZUNsYXNzKCdpcy1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE1vdW50IGl0IHRvIHRoZSBET01cbiAgICAgICAgICAgIGNvbnN0IG1vdW50RWxlbWVudCA9IG1lLmZvcm1FbChtb3VudFNlbGVjdG9yKS5nZXQoMCk7XG4gICAgICAgICAgICBlbGVtZW50Lm1vdW50KG1vdW50RWxlbWVudCk7XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENyZWF0ZSBhbGwgZWxlbWVudHNcbiAgICAgICAgdGhpcy5zdHJpcGVFbGVtZW50cyA9IFtcbiAgICAgICAgICAgIGNyZWF0ZUFuZE1vdW50U3RyaXBlRWxlbWVudCgnY2FyZE51bWJlcicsICcuc3RyaXBlLWVsZW1lbnQtY2FyZC1udW1iZXInKSxcbiAgICAgICAgICAgIGNyZWF0ZUFuZE1vdW50U3RyaXBlRWxlbWVudCgnY2FyZEV4cGlyeScsICcuc3RyaXBlLWVsZW1lbnQtY2FyZC1leHBpcnknKSxcbiAgICAgICAgICAgIGNyZWF0ZUFuZE1vdW50U3RyaXBlRWxlbWVudCgnY2FyZEN2YycsICcuc3RyaXBlLWVsZW1lbnQtY2FyZC1jdmMnKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhbGwgZXhpc3RpbmcgU3RyaXBlIGVsZW1lbnRzIGZyb20gdGhlIFN0cmlwZSBjYXJkIHBheW1lbnQgZm9ybSB0aGV5IGFyZSBjdXJyZW50bHkgbW91bnRlZCB0by5cbiAgICAgKi9cbiAgICB1bm1vdW50U3RyaXBlRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC51bm1vdW50KCkpO1xuICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoZSBsaXN0IG9mIGludmFsaWQgZmllbGRzIGZvciBhbnkgZW50cmllcyBhbmQsIGlmIGZvdW5kLCBqb2lucyB0aGVtIHRvIGFuIGVycm9yIG1lc3NhZ2UsIHdoaWNoIGlzIHRoZW5cbiAgICAgKiBkaXNwbGF5ZWQgaW4gdGhlIGVycm9yIGJveC4gSWYgbm8gaW52YWxpZCBmaWVsZHMgYXJlIGZvdW5kLCB0aGUgZXJyb3IgYm94IGlzIGhpZGRlbi5cbiAgICAgKi9cbiAgICB1cGRhdGVWYWxpZGF0aW9uRXJyb3JzKCkge1xuICAgICAgICBjb25zdCBlcnJvckJveCA9IHRoaXMuZm9ybUVsKCcuc3RyaXBlLXBheW1lbnQtdmFsaWRhdGlvbi1lcnJvci1ib3gnKTtcbiAgICAgICAgY29uc3QgYm94Q29udGVudCA9IGVycm9yQm94LmZpbmQoJy5hbGVydC1jb250ZW50Jyk7XG4gICAgICAgIGJveENvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaW52YWxpZEZpZWxkcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBlcnJvciBib3ggbWVzc2FnZSBhbmQgbWFrZSBpdCB2aXNpYmxlXG4gICAgICAgICAgICBjb25zdCBsaXN0RWwgPSAkKCc8dWw+PC91bD4nKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnYWxlcnQtbGlzdCcpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKGJveENvbnRlbnQpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5pbnZhbGlkRmllbGRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAkKCc8bGk+PC9saT4nKVxuICAgICAgICAgICAgICAgICAgICAudGV4dCh0aGlzLmludmFsaWRGaWVsZHNba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGxpc3RFbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVycm9yQm94LnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yQm94LmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgY2hhbmdlIGxpc3RlbmVycyB0byB0aGUgY2FyZCBzZWxlY3Rpb24gYW5kIGNhcmQgaG9sZGVyIGZpZWxkIGFzIHdlbGwgYXMgYSBzdWJtaXNzaW9uIGxpc3RlbmVyIG9uIHRoZSBtYWluXG4gICAgICogcGF5bWVudCBmb3JtLlxuICAgICAqL1xuICAgIG9ic2VydmVGb3JtKCkge1xuICAgICAgICAvLyBBZGQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuZmluZEZvcm0oKS5vbignc3VibWl0JywgeyBzY29wZTogdGhpcyB9LCB0aGlzLm9uRm9ybVN1Ym1pc3Npb24pO1xuICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1jYXJkcycpLm9uKCdjaGFuZ2UnLCB7IHNjb3BlOiB0aGlzIH0sIHRoaXMub25DYXJkU2VsZWN0aW9uQ2hhbmdlKTtcblxuICAgICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IHZhbHVlIGFuZCBhZGQgbGlzdGVuZXJcbiAgICAgICAgY29uc3QgY2FyZEhvbGRlckVsZW0gPSB0aGlzLmZvcm1FbCgnLnN0cmlwZS1jYXJkLWhvbGRlcicpO1xuICAgICAgICBjYXJkSG9sZGVyRWxlbS5kYXRhKCdvbGRWYWwnLCBjYXJkSG9sZGVyRWxlbS52YWwoKSk7XG4gICAgICAgIGNhcmRIb2xkZXJFbGVtLm9uKCdwcm9wZXJ0eWNoYW5nZSBrZXl1cCBpbnB1dCBwYXN0ZScsIHsgc2NvcGU6IHRoaXMgfSwgdGhpcy5vbkNhcmRIb2xkZXJDaGFuZ2UpO1xuICAgIH1cblxuICAgIHJlbW92ZUZvcm1MaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuZmluZEZvcm0oKS5vZmYoJ3N1Ym1pdCcsIHRoaXMub25Gb3JtU3VibWlzc2lvbik7XG4gICAgICAgIHRoaXMuZm9ybUVsKCcuc3RyaXBlLXNhdmVkLWNhcmRzJykub2ZmKCdjaGFuZ2UnLCB0aGlzLm9uQ2FyZFNlbGVjdGlvbkNoYW5nZSk7XG4gICAgICAgIHRoaXMuZm9ybUVsKCcuc3RyaXBlLWNhcmQtaG9sZGVyJykub2ZmKCdwcm9wZXJ0eWNoYW5nZSBrZXl1cCBpbnB1dCBwYXN0ZScsIHRoaXMub25DYXJkSG9sZGVyQ2hhbmdlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCB2YWxpZGF0aW9uIGVycm9ycyBmb3IgdGhlIGZpZWxkIHdpdGggdGhlIGdpdmVuICdmaWVsZElkJyBhbmQgdHJpZ2dlcnMgYW4gdXBkYXRlIG9mIHRoZSBkaXNwbGF5ZWRcbiAgICAgKiB2YWxpZGF0aW9uIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBTdHJpbmcgZmllbGRJZFxuICAgICAqL1xuICAgIG1hcmtGaWVsZFZhbGlkKGZpZWxkSWQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuaW52YWxpZEZpZWxkc1tmaWVsZElkXTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWxpZGF0aW9uRXJyb3JzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB0aGUgZXJyb3IgbWVzc2FnZSBiYXNlZCBvbiB0aGUgZ2l2ZW4gJ2Vycm9yQ29kZScgYW5kICdtZXNzYWdlJyBhbmQgdHJpZ2dlcnNcbiAgICAgKiBhbiB1cGRhdGUgb2YgdGhlIGRpc3BsYXllZCB2YWxpZGF0aW9uIGVycm9ycy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZElkXG4gICAgICogQHBhcmFtIGVycm9yQ29kZSAob3B0aW9uYWwpIFRoZSBjb2RlIHVzZWQgdG8gZmluZCBhIGxvY2FsaXNlZCBlcnJvciBtZXNzYWdlLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlIChvcHRpb2FubCkgVGhlIGZhbGxiYWNrIGVycm9yIG1lc3NhZ2UgdXNlZCBpbiBjYXNlIG5vICdlcnJvckNvZGUnIGlzIHByb3ZpZGVkIG9yIG5vIHJlc3BlY3RpdmUsIGxvY2FsaXNlZCBkZXNjcmlwdGlvbiBleGlzdHMuXG4gICAgICovXG4gICAgbWFya0ZpZWxkSW52YWxpZChmaWVsZElkLCBlcnJvckNvZGUsIG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gVE9ETzogYWRkIGxvY2FsaXplZCBlcnJvciB3aXRoIHNuaXBwZXRzIGlmIGF2YWlsXG4gICAgICAgIHRoaXMuaW52YWxpZEZpZWxkc1tmaWVsZElkXSA9IG1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3InO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbGlkYXRpb25FcnJvcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaXJzdCB2YWxpZGF0ZXMgdGhlIGZvcm0gYW5kIHBheW1lbnQgc3RhdGUgYW5kLCBpZiB0aGUgbWFpbiBmb3JtIGNhbiBiZSBzdWJtaXR0ZWQsIGRvZXMgbm90aGluZyBmdXJ0aGVyLlxuICAgICAqIElmIGhvd2V2ZXIgdGhlIG1haW4gZm9ybSBjYW5ub3QgYmUgc3VibWl0dGVkLCBiZWNhdXNlIG5vIGNhcmQgaXMgc2VsZWN0ZWQgKG9yIG5vIHRva2VuIHdhcyBjcmVhdGVkKSwgYSBuZXcgU3RyaXBlXG4gICAgICogY2FyZCBhbmQgdG9rZW4gYXJlIGdlbmVyYXRlZCB1c2luZyB0aGUgZW50ZXJlZCBjYXJkIGRhdGEgYW5kIHNhdmVkIGluIHRoZSBmb3JtLCBiZWZvcmUgdGhlIHN1Ym1pc3Npb24gaXNcbiAgICAgKiB0cmlnZ2VyZWQgYWdhaW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXZlbnRcbiAgICAgKi9cbiAgICBvbkZvcm1TdWJtaXNzaW9uKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG1lID0gZXZlbnQuZGF0YS5zY29wZTtcbiAgICAgICAgY29uc3QgZm9ybSA9ICQodGhpcyk7XG5cbiAgICAgICAgLy8gTm90IHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgcGF5bWVudCBtZXRob2RcbiAgICAgICAgaWYgKCFtZS5nZXRBY3RpdmVTdHJpcGVDYXJkRm9ybSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgYSB0b2tlbi9jYXJkIHdhcyBnZW5lcmF0ZWQgYW5kIGhlbmNlIHRoZSBmb3JtIGNhbiBiZSBzdWJtaXR0ZWRcbiAgICAgICAgaWYgKG1lLnNlbGVjdGVkQ2FyZCkge1xuICAgICAgICAgICAgaWYgKCFtZS5zZWxlY3RlZENhcmRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWUudW5tb3VudFN0cmlwZUVsZW1lbnRzKCk7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBtZS5fY2xpZW50LnBvc3QobWUub3B0aW9ucy5wZXJzaXN0VXJsLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgY2FyZDogbWUuc2VsZWN0ZWRDYXJkLFxuICAgICAgICAgICAgfSksIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKHJlcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lLnNlbGVjdGVkQ2FyZENoYW5nZWQgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIGFnYWluIHRvIGZpbmlzaCB0aGUgcGF5bWVudCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgZm9ybS5zdWJtaXQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmV2ZW50IHRoZSBmb3JtIGZyb20gYmVpbmcgc3VibWl0dGVkIHVudGlsIGEgbmV3IFN0cmlwZSB0b2tlbiBpcyBnZW5lcmF0ZWQgYW5kIHJlY2VpdmVkXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGludmFsaWQgZmllbGRzXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyhtZS5pbnZhbGlkRmllbGRzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZW5kIHRoZSBjcmVkaXQgY2FyZCBpbmZvcm1hdGlvbiB0byBTdHJpcGVcbiAgICAgICAgbWUuc2V0U3VibWl0QnV0dG9uc0xvYWRpbmcoKTtcbiAgICAgICAgbWUuc3RyaXBlQ2xpZW50LmNyZWF0ZVBheW1lbnRNZXRob2QoJ2NhcmQnLCBtZS5zdHJpcGVFbGVtZW50c1swXSwge1xuICAgICAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogbWUuZm9ybUVsKCcuc3RyaXBlLWNhcmQtaG9sZGVyJykudmFsKCksXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHJlc2V0IHRoZSBzdWJtaXQgYnV0dG9ucyBpbiBjYXNlIG9mIGFuIGVycm9yLCBiZWNhdXNlIG90aGVyd2lzZSB0aGUgZm9ybSBpcyBzdWJtaXR0ZWQgYWdhaW5cbiAgICAgICAgICAgICAgICAvLyByaWdodCBhd2F5cyBhbmQgaGVuY2Ugd2Ugd2FudCB0aGUgYnV0dG9ucyB0byBzdGF5IGRpc2FibGVkXG4gICAgICAgICAgICAgICAgbWUucmVzZXRTdWJtaXRCdXR0b25zKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBEaXNwbGF5IHRoZSBlcnJvclxuICAgICAgICAgICAgICAgIG1lLmhhbmRsZVN0cmlwZUVycm9yKHJlc3VsdC5lcnJvcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNhdmUgdGhlIGNhcmQgaW5mb3JtYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCBjYXJkID0gcmVzdWx0LnBheW1lbnRNZXRob2QuY2FyZDtcbiAgICAgICAgICAgICAgICBjYXJkLmlkID0gcmVzdWx0LnBheW1lbnRNZXRob2QuaWQ7XG4gICAgICAgICAgICAgICAgY2FyZC5uYW1lID0gbWUuZm9ybUVsKCcuc3RyaXBlLWNhcmQtaG9sZGVyJykudmFsKCk7XG4gICAgICAgICAgICAgICAgbWUuc2V0U2VsZWN0ZWRDYXJkKGNhcmQpO1xuXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB3aGV0aGVyIHRvIHNhdmUgdGhlIGNyZWRpdCBjYXJkIGZvciBmdXR1cmUgY2hlY2tvdXRzXG4gICAgICAgICAgICAgICAgY29uc3Qgc2F2ZUNhcmQgPSBtZS5mb3JtRWwoJy5zdHJpcGUtc2F2ZS1jYXJkJykuaXMoJzpjaGVja2VkJyk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbWUuX2NsaWVudC5wb3N0KG1lLm9wdGlvbnMucGVyc2lzdFVybCwgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVDYXJkLFxuICAgICAgICAgICAgICAgICAgICB9KSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIGFnYWluIHRvIGZpbmlzaCB0aGUgcGF5bWVudCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZGVidWdnZXIgKi9cbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgc3Vic2NyaWJlciB0byB0aGUgY2FyZCBob2xkZXIgZm9ybSBmaWVsZCB0aGF0IGlzIGZpcmVkIHdoZW4gaXRzIHZhbHVlIGlzIGNoYW5nZWQgdG8gdmFsaWRhdGUgdGhlXG4gICAgICogZW50ZXJlZCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBPYmplY3QgZXZlbnRcbiAgICAgKi9cbiAgICBvbkNhcmRIb2xkZXJDaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgbWUgPSBldmVudC5kYXRhLnNjb3BlO1xuICAgICAgICBjb25zdCBlbGVtID0gJCh0aGlzKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICAgICAgaWYgKGVsZW0uZGF0YSgnb2xkVmFsJykgPT09IGVsZW0udmFsKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbGVtLmRhdGEoJ29sZFZhbCcsIGVsZW0udmFsKCkpO1xuXG4gICAgICAgIC8vIFZhbGlkYXRlIHRoZSBmaWVsZFxuICAgICAgICBpZiAoZWxlbS52YWwoKS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBlbGVtLmFkZENsYXNzKCdpcy1pbnZhbGlkJyk7XG4gICAgICAgICAgICBtZS5tYXJrRmllbGRJbnZhbGlkKCdjYXJkSG9sZGVyJywgJ2ludmFsaWRfY2FyZF9ob2xkZXInKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW0ucmVtb3ZlQ2xhc3MoJ2lzLWludmFsaWQnKTtcbiAgICAgICAgICAgIG1lLm1hcmtGaWVsZFZhbGlkKCdjYXJkSG9sZGVyJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgY2hhbmdlIG9ic2VydmVyIHRvIHRoZSBjYXJkIHNlbGVjdGlvbiBmaWVsZC4gSWYgYW4gZXhpc3RpbmcgY2FyZCBpcyBzZWxlY3RlZCwgYWxsIGZvcm0gZmllbGRzIGFyZSBoaWRkZW5cbiAgICAgKiBhbmQgdGhlIGNhcmQncyBTdHJpcGUgaW5mb3JtYXRpb24gaXMgYWRkZWQgdG8gdGhlIGZvcm0uIElmIHRoZSAnbmV3JyBvcHRpb24gaXMgc2VsZWN0ZWQsIGFsbCBmaWVsZHMgbWFkZSB2aXNpYmxlXG4gICAgICogYW5kIHRoZSBTdHJpcGUgY2FyZCBpbmZvIGlzIHJlbW92ZWQgZnJvbSB0aGUgZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBPYmplY3QgZXZlbnRcbiAgICAgKi9cbiAgICBvbkNhcmRTZWxlY3Rpb25DaGFuZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgbWUgPSBldmVudC5kYXRhLnNjb3BlO1xuICAgICAgICBjb25zdCBlbGVtID0gJCh0aGlzKTtcblxuICAgICAgICBpZiAoZWxlbS52YWwoKSA9PT0gJ25ldycpIHtcbiAgICAgICAgICAgIC8vIEEgbmV3LCBlbXB0eSBjYXJkIHdhcyBzZWxlY3RlZFxuICAgICAgICAgICAgbWUuc2V0U2VsZWN0ZWRDYXJkKG51bGwpO1xuXG4gICAgICAgICAgICAvLyBNYWtlIHZhbGlkYXRpb24gZXJyb3JzIHZpc2libGVcbiAgICAgICAgICAgIG1lLnVwZGF0ZVZhbGlkYXRpb25FcnJvcnMoKTtcblxuICAgICAgICAgICAgLy8gU2hvdyB0aGUgc2F2ZSBjaGVjayBib3hcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1jYXJkLWZpZWxkJykuc2hvdygpO1xuICAgICAgICAgICAgbWUuZm9ybUVsKCcuc3RyaXBlLWNhcmQtcm93Jykuc2hvdygpO1xuICAgICAgICAgICAgbWUuZm9ybUVsKCcuc3RyaXBlLXNhdmUtY2FyZCcpLnNob3coKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbmQgdGhlIHNlbGVjdGVkIGNhcmRcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZS5vcHRpb25zLmF2YWlsYWJsZUNhcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZENhcmQgPSBtZS5vcHRpb25zLmF2YWlsYWJsZUNhcmRzW2ldO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2FyZC5pZCAhPT0gZWxlbS52YWwoKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBjYXJkXG4gICAgICAgICAgICBtZS5zZXRTZWxlY3RlZENhcmQoc2VsZWN0ZWRDYXJkKTtcblxuICAgICAgICAgICAgLy8gSGlkZSB2YWxpZGF0aW9uIGVycm9yc1xuICAgICAgICAgICAgbWUuZm9ybUVsKCcuc3RyaXBlLXBheW1lbnQtdmFsaWRhdGlvbi1lcnJvci1ib3gnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIC8vIEhpZGUgYWxsIGNhcmQgZmllbGRzXG4gICAgICAgICAgICBtZS5mb3JtRWwoJy5zdHJpcGUtY2FyZC1maWVsZCcpLmhpZGUoKTtcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1jYXJkLXJvdycpLmhpZGUoKTtcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1zYXZlLWNhcmQnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYm90aCBzdWJtaXQgYnV0dG9ucyBvbiB0aGUgcGFnZSBhbmQgYWRkcyB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgYXMgd2VsbCBhcyB0aGUgbG9hZGluZyBpbmRpY2F0b3IgdG8gZWFjaFxuICAgICAqIG9mIHRoZW0uXG4gICAgICovXG4gICAgc2V0U3VibWl0QnV0dG9uc0xvYWRpbmcoKSB7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBidXR0b24gZmlyc3QgdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIG11bHRpcGxlIGxvYWRpbmcgaW5kaWNhdG9yc1xuICAgICAgICB0aGlzLnJlc2V0U3VibWl0QnV0dG9ucygpO1xuICAgICAgICAkKCcjY29uZmlybVBheW1lbnRGb3JtIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdLCAuY29uZmlybS0tYWN0aW9ucyBidXR0b25bZm9ybT1cImNvbmZpcm1QYXltZW50Rm9ybVwiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmh0bWwoJCh0aGlzKS50ZXh0KCkgKyAnPGRpdiBjbGFzcz1cImxvYWRlclwiIHJvbGU9XCJzdGF0dXNcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTt0b3A6IDRweFwiPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPkxvYWRpbmcuLi48L3NwYW4+PC9kaXY+JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYm90aCBzdWJtaXQgYnV0dG9ucyBvbiB0aGUgcGFnZSBhbmQgcmVzZXRzIHRoZW0gYnkgcmVtb3ZpbmcgdGhlICdkaXNhYmxlZCcgYXR0cmlidXRlIGFzIHdlbGwgYXMgdGhlXG4gICAgICogbG9hZGluZyBpbmRpY2F0b3IuXG4gICAgICovXG4gICAgcmVzZXRTdWJtaXRCdXR0b25zKCkge1xuICAgICAgICAkKCcjY29uZmlybVBheW1lbnRGb3JtIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdLCAuY29uZmlybS0tYWN0aW9ucyBidXR0b25bZm9ybT1cImNvbmZpcm1QYXltZW50Rm9ybVwiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykuZmluZCgnLmxvYWRlcicpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2xhdGVkIGVycm9yIG1lc3NhZ2UgaW4gdGhlIGdlbmVyYWwgZXJyb3IgYm94LlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0cmlwZUVycm9yXG4gICAgICovXG4gICAgaGFuZGxlU3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3IpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZVRvRGlzcGxheSA9IHRoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcltzdHJpcGVFcnJvci5jb2RlIHx8ICcnXSB8fCBzdHJpcGVFcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgdGhpcy5mb3JtRWwoJy5zdHJpcGUtcGF5bWVudC1lcnJvci1ib3gnKS5zaG93KCkuZmluZCgnLmFsZXJ0LWNvbnRlbnQnKS5odG1sKGAke3RoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcn06ICR7bWVzc2FnZVRvRGlzcGxheX1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmllcyB0byBmaW5kIGEgc3RyaXBlIGNhcmQgZm9ybSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgcGF5bWVudCBtZXRob2QuIFRoYXQgaXMsIGlmIGEgc3RyaXBlIGNhcmQgcGF5bWVudFxuICAgICAqIG1ldGhvZCBpcyBzZWxlY3RlZCwgaXRzIGZvcm0gaXMgcmV0dXJuZWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGpRdWVyeXxudWxsXG4gICAgICovXG4gICAgZ2V0QWN0aXZlU3RyaXBlQ2FyZEZvcm0oKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSAkKCdpbnB1dFtpZF49XCJwYXltZW50TWV0aG9kXCJdOmNoZWNrZWQnKS5jbG9zZXN0KCcucGF5bWVudC1tZXRob2QnKS5maW5kKCcuc3RyaXBlLXBheW1lbnQtY2FyZC1mb3JtJyk7XG5cbiAgICAgICAgcmV0dXJuIChmb3JtLmxlbmd0aCA+IDApID8gZm9ybS5maXJzdCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICBnZXRTdHJpcGVDYXJkRm9ybSgpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9ICQoJ2lucHV0W2lkXj1cInBheW1lbnRNZXRob2RcIl0nKS5jbG9zZXN0KCcucGF5bWVudC1tZXRob2QnKS5maW5kKCcuc3RyaXBlLXBheW1lbnQtY2FyZC1mb3JtJyk7XG5cbiAgICAgICAgcmV0dXJuIChmb3JtLmxlbmd0aCA+IDApID8gZm9ybS5maXJzdCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgalF1ZXJ5IHF1ZXJ5IG9uIHRoZSBET00gdHJlZSB1bmRlciB0aGUgYWN0aXZlIHN0cmlwZSBjYXJkIGZvcm0gdXNpbmcgdGhlIGdpdmVuIHNlbGVjdG9yLiBUaGlzIG1ldGhvZFxuICAgICAqIHNob3VsZCBiZSB1c2VkIHdoZW4gc2VsZWN0aW5nIGFueSBmaWVsZHMgdGhhdCBhcmUgcGFydCBvZiBhIFN0cmlwZSBjYXJkIHBheW1lbnQgZm9ybS4gSWYgbm8gU3RyaXBlIGNhcmQgZm9ybSBpc1xuICAgICAqIGFjdGl2ZSwgYW4gZW1wdHkgcXVlcnkgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIFN0cmluZyBzZWxlY3RvclxuICAgICAqIEByZXR1cm4galF1ZXJ5XG4gICAgICovXG4gICAgZm9ybUVsKHNlbGVjdG9yKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmdldEFjdGl2ZVN0cmlwZUNhcmRGb3JtKCk7XG4gICAgICAgIHJldHVybiAoZm9ybSkgPyBmb3JtLmZpbmQoc2VsZWN0b3IpIDogJCgnc3RyaXBlX3BheW1lbnRfY2FyZF9ub3RfZm91bmQnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIGpRdWVyeSBUaGUgbWFpbiBwYXltZW50IHNlbGVjdGlvbiBmb3JtIGVsZW1lbnQuXG4gICAgICovXG4gICAgZmluZEZvcm0oKSB7XG4gICAgICAgIHJldHVybiAkKCcjY29uZmlybVBheW1lbnRGb3JtJyk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFjQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBREE7QUFEQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBRUE7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQURBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7Ozs7QUF6YkE7QUFDQTtBQURBO0FBRUE7OztBQUdBO0FBRUE7QUFFQTtBQUVBO0FBVkE7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:////TfR\n");

/***/ }),

/***/ "I6n5":
/*!******************************************************************************************************************************************************!*\
  !*** /home/felix/PhpstormProjects/shopware-6/plugins/ShopwareStripePayment/src/Resources/storefront/sepa-selection/stripe-payment.sepa-selection.js ***!
  \******************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return StripePaymentSepaSelection; });\n/* harmony import */ var src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/script/service/http-client.service */ \"k8s9\");\n/* harmony import */ var src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/script/plugin-system/plugin.class */ \"FGIj\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable import/no-unresolved */\n\n\n\nvar StripePaymentSepaSelection =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(StripePaymentSepaSelection, _Plugin);\n\n  function StripePaymentSepaSelection() {\n    _classCallCheck(this, StripePaymentSepaSelection);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(StripePaymentSepaSelection).apply(this, arguments));\n  }\n\n  _createClass(StripePaymentSepaSelection, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      this._client = new src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"](window.accessKey, window.contextToken);\n      this.stripeElements = [];\n      this.invalidFields = [];\n      this.options = _extends(StripePaymentSepaSelection.options, this.options || {});\n      /* eslint-disable no-undef */\n\n      this.stripeClient = Stripe(this.options.stripePublicKey); // Save config\n\n      this.setSelectedSepaBankAccount(this.options.selectedSepaBankAccount); // Setup form on payment method changes\n\n      var paymentMethodElements = document.querySelectorAll('input.payment-method-input');\n      paymentMethodElements.forEach(function (element) {\n        element.addEventListener('change', function () {\n          _this.setupForm();\n        });\n      });\n      this.setupForm();\n    }\n    /**\n     * Saves the given card and removes all hidden Stripe fields from the form. If the card exists, its ID as well as\n     * its encoded data are added to the form as hidden fields.\n     *\n     * @param sepaBankAccount A Stripe card object.\n     */\n\n  }, {\n    key: \"setSelectedSepaBankAccount\",\n    value: function setSelectedSepaBankAccount(sepaBankAccount) {\n      this.selectedSepaBankAccount = sepaBankAccount;\n\n      if (this.selectedSepaBankAccount) {\n        this.selectedSepaBankAccountChanged = true;\n      }\n    }\n    /**\n     * Sets up the payment form by first unounting all Stripe elements that might be already mounted to the DOM and\n     * clearing all validation errors. Then, if a stripe card payment method is selected, mounts new Stripe Elements\n     * fields to the form and adds some observers to other fields as well as the form.\n     */\n\n  }, {\n    key: \"setupForm\",\n    value: function setupForm() {\n      // Reset form\n      this.unmountStripeElements();\n      this.invalidFields = [];\n      this.updateValidationErrors();\n\n      if (this.getActiveStripeSepaForm()) {\n        this.getStripeSepaForm().show(); // Mount Stripe form fields again to the now active form and add other observers\n\n        this.mountStripeElements();\n        this.observeForm(); // Make sure the card selection matches the internal state\n\n        if (this.selectedSepaBankAccount) {\n          this.formEl('.stripe-saved-sepa-bank-accounts').val(this.selectedSepaBankAccount.id);\n        }\n\n        this.formEl('.stripe-saved-sepa-bank-accounts').trigger('change');\n      } else {\n        this.removeFormListeners();\n        this.getStripeSepaForm().hide();\n      }\n    }\n    /**\n     * Creates the Stripe Elements fields for card number, expiry and CVC and mounts them to their resepctive nodes in\n     * the active Stripe card payment form.\n     */\n\n  }, {\n    key: \"mountStripeElements\",\n    value: function mountStripeElements() {\n      // Define a closure to create all elements using the same 'Elements' instance\n      var elements = this.stripeClient.elements();\n      var me = this;\n\n      var createAndMountStripeElement = function createAndMountStripeElement(type, mountSelector) {\n        // Create the element and add the change listener\n        var options = {};\n\n        if (type === 'iban') {\n          options = {\n            supportedCountries: ['SEPA'],\n            placeholderCountry: me.options.countryCode\n          };\n        }\n\n        var element = elements.create(type, options);\n        element.on('change', function (event) {\n          if (event.error && event.error.type === 'validation_error') {\n            me.markFieldInvalid(type, event.error.code, event.error.message);\n            $(mountSelector).addClass('is-invalid');\n          } else {\n            me.markFieldValid(type);\n            $(mountSelector).removeClass('is-invalid');\n          }\n        }); // Mount it to the DOM\n\n        var mountElement = me.formEl(mountSelector).get(0);\n        element.mount(mountElement);\n        return element;\n      }; // Create all elements\n\n\n      this.stripeElements = [createAndMountStripeElement('iban', '.stripe-element-sepa-iban')];\n    }\n    /**\n     * Unmounts all existing Stripe elements from the Stripe card payment form they are currently mounted to.\n     */\n\n  }, {\n    key: \"unmountStripeElements\",\n    value: function unmountStripeElements() {\n      this.stripeElements.forEach(function (element) {\n        return element.unmount();\n      });\n      this.stripeElements = [];\n    }\n    /**\n     * Checks the list of invalid fields for any entries and, if found, joins them to an error message, which is then\n     * displayed in the error box. If no invalid fields are found, the error box is hidden.\n     */\n\n  }, {\n    key: \"updateValidationErrors\",\n    value: function updateValidationErrors() {\n      var _this2 = this;\n\n      var errorBox = this.formEl('.stripe-payment-validation-error-box');\n      var boxContent = errorBox.find('.alert-content');\n      boxContent.empty();\n\n      if (Object.keys(this.invalidFields).length > 0) {\n        // Update the error box message and make it visible\n        var listEl = $('<ul></ul>').addClass('alert-list').appendTo(boxContent);\n        Object.keys(this.invalidFields).forEach(function (key) {\n          $('<li></li>').text(_this2.invalidFields[key]).appendTo(listEl);\n        });\n        errorBox.show();\n      } else {\n        errorBox.hide();\n      }\n    }\n    /**\n     * Adds change listeners to the card selection and card holder field as well as a submission listener on the main\n     * payment form.\n     */\n\n  }, {\n    key: \"observeForm\",\n    value: function observeForm() {\n      // Add listeners\n      this.findForm().on('submit', {\n        scope: this\n      }, this.onFormSubmission);\n      this.formEl('.stripe-saved-sepa-bank-accounts').on('change', {\n        scope: this\n      }, this.onSepaBankAccountSelectionChange);\n      var me = this;\n      this.formEl('input[class^=\"stripe-sepa-\"]').each(function () {\n        // Save the current value and add listener\n        var elem = $(this);\n        elem.data('oldVal', elem.val());\n        elem.on('propertychange keyup input paste', {\n          scope: me\n        }, me.onFieldChange);\n      });\n    }\n  }, {\n    key: \"removeFormListeners\",\n    value: function removeFormListeners() {\n      this.findForm().off('submit', this.onFormSubmission);\n      this.formEl('.stripe-saved-sepa-bank-accounts').off('change', this.onSepaBankAccountSelectionChange);\n      var me = this;\n      this.formEl('input[class^=\"stripe-sepa-\"]').each(function () {\n        // Save the current value and add listener\n        var elem = $(this);\n        elem.off('propertychange keyup input paste', me.onFieldChange);\n      });\n    }\n    /**\n     * Validates the field value to not be empty. If the validation failes, the field is marked invalid.\n     *\n     * @param Event event\n     * @param boolean|undefined force\n     */\n\n  }, {\n    key: \"onFieldChange\",\n    value: function onFieldChange(event, force) {\n      var me = event.data.scope;\n      var elem = $(this);\n      var name = elem.attr('name'); // Check if value has changed, if 'force' is not set\n\n      if (!force && elem.data('oldVal') === elem.val()) {\n        return;\n      }\n\n      elem.data('oldVal', elem.val()); // Validate the field\n\n      if (elem.val().trim().length === 0) {\n        elem.addClass('is-invalid');\n        me.markFieldInvalid(name, 'invalid_' + name);\n      } else {\n        elem.removeClass('is-invalid');\n        me.markFieldValid(name);\n      }\n    }\n    /**\n     * Removes all validation errors for the field with the given 'fieldId' and triggers an update of the displayed\n     * validation errors.\n     *\n     * @param String fieldId\n     */\n\n  }, {\n    key: \"markFieldValid\",\n    value: function markFieldValid(fieldId) {\n      delete this.invalidFields[fieldId];\n      this.updateValidationErrors();\n    }\n    /**\n     * Determines the error message based on the given 'errorCode' and 'message' and triggers\n     * an update of the displayed validation errors.\n     *\n     * @param fieldId\n     * @param errorCode (optional) The code used to find a localised error message.\n     * @param message (optioanl) The fallback error message used in case no 'errorCode' is provided or no respective, localised description exists.\n     */\n\n  }, {\n    key: \"markFieldInvalid\",\n    value: function markFieldInvalid(fieldId, errorCode, message) {\n      this.invalidFields[fieldId] = this.options.snippets.errors[errorCode || ''] || message || 'Unknown error';\n      this.updateValidationErrors();\n    }\n    /**\n     * First validates the form and payment state and, if the main form can be submitted, does nothing further.\n     * If however the main form cannot be submitted, because no card is selected (or no token was created), a new Stripe\n     * card and token are generated using the entered card data and saved in the form, before the submission is\n     * triggered again.\n     *\n     * @param event\n     */\n\n  }, {\n    key: \"onFormSubmission\",\n    value: function onFormSubmission(event) {\n      var me = event.data.scope;\n      var form = $(this); // Not the currently selected payment method\n\n      if (!me.getActiveStripeSepaForm()) {\n        return undefined;\n      } // Check if a token/card was generated and hence the form can be submitted\n\n\n      if (me.selectedSepaBankAccount) {\n        if (!me.selectedSepaBankAccountChanged) {\n          return undefined;\n        }\n\n        me.unmountStripeElements();\n        event.preventDefault();\n\n        me._client.post(me.options.persistUrl, JSON.stringify({\n          selectedSepaBankAccount: me.selectedSepaBankAccount\n        }), function (res) {\n          var result = JSON.parse(res);\n\n          if (!result.success) {\n            return;\n          }\n\n          me.selectedSepaBankAccountChanged = null; // Submit the form again to finish the payment process\n\n          form.submit();\n        });\n\n        return;\n      } // Prevent the form from being submitted until a new Stripe token is generated and received\n\n\n      event.preventDefault(); // Check for invalid fields\n\n      if (Object.keys(me.invalidFields).length > 0) {\n        return;\n      } // Send the credit card information to Stripe\n\n\n      me.setSubmitButtonsLoading();\n      me.stripeClient.createPaymentMethod('sepa_debit', me.stripeElements[0], {\n        billing_details: {\n          name: me.formEl('input.stripe-sepa-account-owner').val(),\n          email: me.formEl('input.stripe-sepa-email').val(),\n          address: {\n            line1: me.formEl('input.stripe-sepa-street').val(),\n            city: me.formEl('input.stripe-sepa-zip-code').val(),\n            postal_code: me.formEl('input.stripe-sepa-city').val(),\n            country: me.formEl('select.stripe-sepa-country').val()\n          }\n        }\n      }).then(function (result) {\n        if (result.error) {\n          // Only reset the submit buttons in case of an error, because otherwise the form is submitted again\n          // right aways and hence we want the buttons to stay disabled\n          me.resetSubmitButtons(); // Display the error\n\n          me.handleStripeError(result.error);\n        } else {\n          // Save the card information\n          var sepaBankAccount = result.paymentMethod.sepa_debit;\n          sepaBankAccount.id = result.paymentMethod.id;\n          sepaBankAccount.name = me.formEl('.stripe-sepa-account-owner').val();\n          me.setSelectedSepaBankAccount(sepaBankAccount);\n          var saveSepaBankAccount = me.formEl('.stripe-save-sepa-bank-account').is(':checked');\n\n          try {\n            me._client.post(me.options.persistUrl, JSON.stringify({\n              selectedSepaBankAccount: sepaBankAccount,\n              saveSepaBankAccount: saveSepaBankAccount\n            }), function (res) {\n              var result = JSON.parse(res);\n\n              if (!result.success) {\n                return;\n              } // Submit the form again to finish the payment process\n\n\n              form.submit();\n            });\n          } catch (err) {\n            /* eslint-disable no-debugger */\n            debugger;\n          }\n        }\n      });\n    }\n    /**\n     * Adds a change observer to the card selection field. If an existing card is selected, all form fields are hidden\n     * and the card's Stripe information is added to the form. If the 'new' option is selected, all fields made visible\n     * and the Stripe card info is removed from the form.\n     *\n     * @param Object event\n     */\n\n  }, {\n    key: \"onSepaBankAccountSelectionChange\",\n    value: function onSepaBankAccountSelectionChange(event) {\n      var me = event.data.scope;\n      var elem = $(this);\n\n      if (elem.val() === 'new') {\n        // A new, empty card was selected\n        me.setSelectedSepaBankAccount(null); // Make validation errors visible\n\n        me.updateValidationErrors(); // Show the save check box\n\n        me.formEl('.stripe-sepa-field').show();\n        me.formEl('.stripe-sepa-row').show();\n        me.formEl('.stripe-save-sepa-bank-account').show().prop('checked', true);\n        return;\n      } // Find the selected card\n\n\n      for (var i = 0; i < me.options.availableSepaBankAccounts.length; i++) {\n        var selectedSepaBankAccount = me.options.availableSepaBankAccounts[i];\n\n        if (selectedSepaBankAccount.id !== elem.val()) {\n          continue;\n        } // Save the card\n\n\n        if (!me.selectedSepaBankAccount || me.selectedSepaBankAccount.id !== selectedSepaBankAccount.id) {\n          me.setSelectedSepaBankAccount(selectedSepaBankAccount);\n        } // Hide validation errors\n\n\n        me.formEl('.stripe-payment-validation-error-box').hide(); // Hide all sepa fields\n\n        me.formEl('.stripe-sepa-field').hide();\n        me.formEl('.stripe-sepa-row').hide();\n        me.formEl('.stripe-save-bank-account').hide();\n        break;\n      }\n    }\n    /**\n     * Finds both submit buttons on the page and adds the 'disabled' attribute as well as the loading indicator to each\n     * of them.\n     */\n\n  }, {\n    key: \"setSubmitButtonsLoading\",\n    value: function setSubmitButtonsLoading() {\n      // Reset the button first to prevent it from being added multiple loading indicators\n      this.resetSubmitButtons();\n      $('#confirmPaymentForm button[type=\"submit\"], .confirm--actions button[form=\"confirmPaymentForm\"]').each(function () {\n        $(this).html($(this).text() + '<div class=\"loader\" role=\"status\" style=\"position: relative;top: 4px\"><span class=\"sr-only\">Loading...</span></div>').attr('disabled', 'disabled');\n      });\n    }\n    /**\n     * Finds both submit buttons on the page and resets them by removing the 'disabled' attribute as well as the\n     * loading indicator.\n     */\n\n  }, {\n    key: \"resetSubmitButtons\",\n    value: function resetSubmitButtons() {\n      $('#confirmPaymentForm button[type=\"submit\"], .confirm--actions button[form=\"confirmPaymentForm\"]').each(function () {\n        $(this).removeAttr('disabled').find('.loader').remove();\n      });\n    }\n    /**\n     * Sets the translated error message in the general error box.\n     *\n     * @param stripeError\n     */\n\n  }, {\n    key: \"handleStripeError\",\n    value: function handleStripeError(stripeError) {\n      var messageToDisplay = this.options.snippets.error[stripeError.code || ''] || stripeError.message || 'Unknown error';\n      this.formEl('.stripe-payment-error-box').show().find('.alert-content').html(\"\".concat(this.options.snippets.error, \": \").concat(messageToDisplay));\n    }\n    /**\n     * Tries to find a stripe card form for the currently active payment method. That is, if a stripe card payment\n     * method is selected, its form is returned, otherwise returns null.\n     *\n     * @return jQuery|null\n     */\n\n  }, {\n    key: \"getActiveStripeSepaForm\",\n    value: function getActiveStripeSepaForm() {\n      var form = $('input[id^=\"paymentMethod\"]:checked').closest('.payment-method').find('.stripe-payment-sepa-form');\n      return form.length > 0 ? form.first() : null;\n    }\n  }, {\n    key: \"getStripeSepaForm\",\n    value: function getStripeSepaForm() {\n      var form = $('input[id^=\"paymentMethod\"]').closest('.payment-method').find('.stripe-payment-sepa-form');\n      return form.length > 0 ? form.first() : null;\n    }\n    /**\n     * Applies a jQuery query on the DOM tree under the active stripe card form using the given selector. This method\n     * should be used when selecting any fields that are part of a Stripe card payment form. If no Stripe card form is\n     * active, an empty query result is returned.\n     *\n     * @param String selector\n     * @return jQuery\n     */\n\n  }, {\n    key: \"formEl\",\n    value: function formEl(selector) {\n      var form = this.getActiveStripeSepaForm();\n      return form ? form.find(selector) : $('stripe_payment_bank_account_not_found');\n    }\n    /**\n     * @return jQuery The main payment selection form element.\n     */\n\n  }, {\n    key: \"findForm\",\n    value: function findForm() {\n      return $('#confirmPaymentForm');\n    }\n  }]);\n\n  return StripePaymentSepaSelection;\n}(src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n_defineProperty(StripePaymentSepaSelection, \"options\", {\n  /**\n   * @type string\n   */\n  stripePublicKey: '',\n  selectedSepaBankAccount: null,\n  availableSepaBankAccounts: [],\n  snippets: {}\n});\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! /home/felix/PhpstormProjects/shopware-6/shopware-development/vendor/shopware/platform/src/Storefront/Resources/node_modules/jquery/dist/jquery.slim.js */ \"wpjq\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSTZuNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vaG9tZS9mZWxpeC9QaHBzdG9ybVByb2plY3RzL3Nob3B3YXJlLTYvcGx1Z2lucy9TaG9wd2FyZVN0cmlwZVBheW1lbnQvc3JjL1Jlc291cmNlcy9zdG9yZWZyb250L3NlcGEtc2VsZWN0aW9uL3N0cmlwZS1wYXltZW50LnNlcGEtc2VsZWN0aW9uLmpzP2MwZGIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLXVucmVzb2x2ZWQgKi9cblxuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnc3JjL3NjcmlwdC9zZXJ2aWNlL2h0dHAtY2xpZW50LnNlcnZpY2UnO1xuaW1wb3J0IFBsdWdpbiBmcm9tICdzcmMvc2NyaXB0L3BsdWdpbi1zeXN0ZW0vcGx1Z2luLmNsYXNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RyaXBlUGF5bWVudFNlcGFTZWxlY3Rpb24gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHN0YXRpYyBvcHRpb25zID0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICBzdHJpcGVQdWJsaWNLZXk6ICcnLFxuXG4gICAgICAgIHNlbGVjdGVkU2VwYUJhbmtBY2NvdW50OiBudWxsLFxuXG4gICAgICAgIGF2YWlsYWJsZVNlcGFCYW5rQWNjb3VudHM6IFtdLFxuXG4gICAgICAgIHNuaXBwZXRzOiB7fSxcbiAgICB9O1xuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gbmV3IEh0dHBDbGllbnQod2luZG93LmFjY2Vzc0tleSwgd2luZG93LmNvbnRleHRUb2tlbik7XG4gICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMgPSBbXTtcbiAgICAgICAgdGhpcy5pbnZhbGlkRmllbGRzID0gW107XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihTdHJpcGVQYXltZW50U2VwYVNlbGVjdGlvbi5vcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30pO1xuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4gICAgICAgIHRoaXMuc3RyaXBlQ2xpZW50ID0gU3RyaXBlKHRoaXMub3B0aW9ucy5zdHJpcGVQdWJsaWNLZXkpO1xuICAgICAgICAvLyBTYXZlIGNvbmZpZ1xuICAgICAgICB0aGlzLnNldFNlbGVjdGVkU2VwYUJhbmtBY2NvdW50KHRoaXMub3B0aW9ucy5zZWxlY3RlZFNlcGFCYW5rQWNjb3VudCk7XG5cbiAgICAgICAgLy8gU2V0dXAgZm9ybSBvbiBwYXltZW50IG1ldGhvZCBjaGFuZ2VzXG4gICAgICAgIGNvbnN0IHBheW1lbnRNZXRob2RFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LnBheW1lbnQtbWV0aG9kLWlucHV0Jyk7XG4gICAgICAgIHBheW1lbnRNZXRob2RFbGVtZW50cy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR1cEZvcm0oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldHVwRm9ybSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNhdmVzIHRoZSBnaXZlbiBjYXJkIGFuZCByZW1vdmVzIGFsbCBoaWRkZW4gU3RyaXBlIGZpZWxkcyBmcm9tIHRoZSBmb3JtLiBJZiB0aGUgY2FyZCBleGlzdHMsIGl0cyBJRCBhcyB3ZWxsIGFzXG4gICAgICogaXRzIGVuY29kZWQgZGF0YSBhcmUgYWRkZWQgdG8gdGhlIGZvcm0gYXMgaGlkZGVuIGZpZWxkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZXBhQmFua0FjY291bnQgQSBTdHJpcGUgY2FyZCBvYmplY3QuXG4gICAgICovXG4gICAgc2V0U2VsZWN0ZWRTZXBhQmFua0FjY291bnQoc2VwYUJhbmtBY2NvdW50KSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRTZXBhQmFua0FjY291bnQgPSBzZXBhQmFua0FjY291bnQ7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkU2VwYUJhbmtBY2NvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkU2VwYUJhbmtBY2NvdW50Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBwYXltZW50IGZvcm0gYnkgZmlyc3QgdW5vdW50aW5nIGFsbCBTdHJpcGUgZWxlbWVudHMgdGhhdCBtaWdodCBiZSBhbHJlYWR5IG1vdW50ZWQgdG8gdGhlIERPTSBhbmRcbiAgICAgKiBjbGVhcmluZyBhbGwgdmFsaWRhdGlvbiBlcnJvcnMuIFRoZW4sIGlmIGEgc3RyaXBlIGNhcmQgcGF5bWVudCBtZXRob2QgaXMgc2VsZWN0ZWQsIG1vdW50cyBuZXcgU3RyaXBlIEVsZW1lbnRzXG4gICAgICogZmllbGRzIHRvIHRoZSBmb3JtIGFuZCBhZGRzIHNvbWUgb2JzZXJ2ZXJzIHRvIG90aGVyIGZpZWxkcyBhcyB3ZWxsIGFzIHRoZSBmb3JtLlxuICAgICAqL1xuICAgIHNldHVwRm9ybSgpIHtcbiAgICAgICAgLy8gUmVzZXQgZm9ybVxuICAgICAgICB0aGlzLnVubW91bnRTdHJpcGVFbGVtZW50cygpO1xuICAgICAgICB0aGlzLmludmFsaWRGaWVsZHMgPSBbXTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWxpZGF0aW9uRXJyb3JzKCk7XG5cbiAgICAgICAgaWYgKHRoaXMuZ2V0QWN0aXZlU3RyaXBlU2VwYUZvcm0oKSkge1xuICAgICAgICAgICAgdGhpcy5nZXRTdHJpcGVTZXBhRm9ybSgpLnNob3coKTtcbiAgICAgICAgICAgIC8vIE1vdW50IFN0cmlwZSBmb3JtIGZpZWxkcyBhZ2FpbiB0byB0aGUgbm93IGFjdGl2ZSBmb3JtIGFuZCBhZGQgb3RoZXIgb2JzZXJ2ZXJzXG4gICAgICAgICAgICB0aGlzLm1vdW50U3RyaXBlRWxlbWVudHMoKTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZUZvcm0oKTtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBjYXJkIHNlbGVjdGlvbiBtYXRjaGVzIHRoZSBpbnRlcm5hbCBzdGF0ZVxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRTZXBhQmFua0FjY291bnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1zZXBhLWJhbmstYWNjb3VudHMnKS52YWwodGhpcy5zZWxlY3RlZFNlcGFCYW5rQWNjb3VudC5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1zZXBhLWJhbmstYWNjb3VudHMnKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRm9ybUxpc3RlbmVycygpO1xuICAgICAgICAgICAgdGhpcy5nZXRTdHJpcGVTZXBhRm9ybSgpLmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIFN0cmlwZSBFbGVtZW50cyBmaWVsZHMgZm9yIGNhcmQgbnVtYmVyLCBleHBpcnkgYW5kIENWQyBhbmQgbW91bnRzIHRoZW0gdG8gdGhlaXIgcmVzZXBjdGl2ZSBub2RlcyBpblxuICAgICAqIHRoZSBhY3RpdmUgU3RyaXBlIGNhcmQgcGF5bWVudCBmb3JtLlxuICAgICAqL1xuICAgIG1vdW50U3RyaXBlRWxlbWVudHMoKSB7XG4gICAgICAgIC8vIERlZmluZSBhIGNsb3N1cmUgdG8gY3JlYXRlIGFsbCBlbGVtZW50cyB1c2luZyB0aGUgc2FtZSAnRWxlbWVudHMnIGluc3RhbmNlXG4gICAgICAgIGNvbnN0IGVsZW1lbnRzID0gdGhpcy5zdHJpcGVDbGllbnQuZWxlbWVudHMoKTtcbiAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICBjb25zdCBjcmVhdGVBbmRNb3VudFN0cmlwZUVsZW1lbnQgPSBmdW5jdGlvbih0eXBlLCBtb3VudFNlbGVjdG9yKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGVsZW1lbnQgYW5kIGFkZCB0aGUgY2hhbmdlIGxpc3RlbmVyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdpYmFuJykge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZENvdW50cmllczogWydTRVBBJ10sXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyQ291bnRyeTogbWUub3B0aW9ucy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzLmNyZWF0ZSh0eXBlLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGVsZW1lbnQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmIGV2ZW50LmVycm9yLnR5cGUgPT09ICd2YWxpZGF0aW9uX2Vycm9yJykge1xuICAgICAgICAgICAgICAgICAgICBtZS5tYXJrRmllbGRJbnZhbGlkKHR5cGUsIGV2ZW50LmVycm9yLmNvZGUsIGV2ZW50LmVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAkKG1vdW50U2VsZWN0b3IpLmFkZENsYXNzKCdpcy1pbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWUubWFya0ZpZWxkVmFsaWQodHlwZSk7XG4gICAgICAgICAgICAgICAgICAgICQobW91bnRTZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ2lzLWludmFsaWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gTW91bnQgaXQgdG8gdGhlIERPTVxuICAgICAgICAgICAgY29uc3QgbW91bnRFbGVtZW50ID0gbWUuZm9ybUVsKG1vdW50U2VsZWN0b3IpLmdldCgwKTtcbiAgICAgICAgICAgIGVsZW1lbnQubW91bnQobW91bnRFbGVtZW50KTtcblxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ3JlYXRlIGFsbCBlbGVtZW50c1xuICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gW1xuICAgICAgICAgICAgY3JlYXRlQW5kTW91bnRTdHJpcGVFbGVtZW50KCdpYmFuJywgJy5zdHJpcGUtZWxlbWVudC1zZXBhLWliYW4nKSxcbiAgICAgICAgXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhbGwgZXhpc3RpbmcgU3RyaXBlIGVsZW1lbnRzIGZyb20gdGhlIFN0cmlwZSBjYXJkIHBheW1lbnQgZm9ybSB0aGV5IGFyZSBjdXJyZW50bHkgbW91bnRlZCB0by5cbiAgICAgKi9cbiAgICB1bm1vdW50U3RyaXBlRWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuc3RyaXBlRWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4gZWxlbWVudC51bm1vdW50KCkpO1xuICAgICAgICB0aGlzLnN0cmlwZUVsZW1lbnRzID0gW107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoZSBsaXN0IG9mIGludmFsaWQgZmllbGRzIGZvciBhbnkgZW50cmllcyBhbmQsIGlmIGZvdW5kLCBqb2lucyB0aGVtIHRvIGFuIGVycm9yIG1lc3NhZ2UsIHdoaWNoIGlzIHRoZW5cbiAgICAgKiBkaXNwbGF5ZWQgaW4gdGhlIGVycm9yIGJveC4gSWYgbm8gaW52YWxpZCBmaWVsZHMgYXJlIGZvdW5kLCB0aGUgZXJyb3IgYm94IGlzIGhpZGRlbi5cbiAgICAgKi9cbiAgICB1cGRhdGVWYWxpZGF0aW9uRXJyb3JzKCkge1xuICAgICAgICBjb25zdCBlcnJvckJveCA9IHRoaXMuZm9ybUVsKCcuc3RyaXBlLXBheW1lbnQtdmFsaWRhdGlvbi1lcnJvci1ib3gnKTtcbiAgICAgICAgY29uc3QgYm94Q29udGVudCA9IGVycm9yQm94LmZpbmQoJy5hbGVydC1jb250ZW50Jyk7XG4gICAgICAgIGJveENvbnRlbnQuZW1wdHkoKTtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaW52YWxpZEZpZWxkcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBlcnJvciBib3ggbWVzc2FnZSBhbmQgbWFrZSBpdCB2aXNpYmxlXG4gICAgICAgICAgICBjb25zdCBsaXN0RWwgPSAkKCc8dWw+PC91bD4nKVxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnYWxlcnQtbGlzdCcpXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKGJveENvbnRlbnQpO1xuICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5pbnZhbGlkRmllbGRzKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAkKCc8bGk+PC9saT4nKVxuICAgICAgICAgICAgICAgICAgICAudGV4dCh0aGlzLmludmFsaWRGaWVsZHNba2V5XSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZFRvKGxpc3RFbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGVycm9yQm94LnNob3coKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yQm94LmhpZGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgY2hhbmdlIGxpc3RlbmVycyB0byB0aGUgY2FyZCBzZWxlY3Rpb24gYW5kIGNhcmQgaG9sZGVyIGZpZWxkIGFzIHdlbGwgYXMgYSBzdWJtaXNzaW9uIGxpc3RlbmVyIG9uIHRoZSBtYWluXG4gICAgICogcGF5bWVudCBmb3JtLlxuICAgICAqL1xuICAgIG9ic2VydmVGb3JtKCkge1xuICAgICAgICAvLyBBZGQgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuZmluZEZvcm0oKS5vbignc3VibWl0JywgeyBzY29wZTogdGhpcyB9LCB0aGlzLm9uRm9ybVN1Ym1pc3Npb24pO1xuICAgICAgICB0aGlzLmZvcm1FbCgnLnN0cmlwZS1zYXZlZC1zZXBhLWJhbmstYWNjb3VudHMnKS5vbignY2hhbmdlJywgeyBzY29wZTogdGhpcyB9LCB0aGlzLm9uU2VwYUJhbmtBY2NvdW50U2VsZWN0aW9uQ2hhbmdlKTtcblxuICAgICAgICBjb25zdCBtZSA9IHRoaXM7XG4gICAgICAgIHRoaXMuZm9ybUVsKCdpbnB1dFtjbGFzc149XCJzdHJpcGUtc2VwYS1cIl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgdmFsdWUgYW5kIGFkZCBsaXN0ZW5lclxuICAgICAgICAgICAgY29uc3QgZWxlbSA9ICQodGhpcyk7XG4gICAgICAgICAgICBlbGVtLmRhdGEoJ29sZFZhbCcsIGVsZW0udmFsKCkpO1xuICAgICAgICAgICAgZWxlbS5vbigncHJvcGVydHljaGFuZ2Uga2V5dXAgaW5wdXQgcGFzdGUnLCB7IHNjb3BlOiBtZSB9LCBtZS5vbkZpZWxkQ2hhbmdlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVtb3ZlRm9ybUxpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5maW5kRm9ybSgpLm9mZignc3VibWl0JywgdGhpcy5vbkZvcm1TdWJtaXNzaW9uKTtcbiAgICAgICAgdGhpcy5mb3JtRWwoJy5zdHJpcGUtc2F2ZWQtc2VwYS1iYW5rLWFjY291bnRzJykub2ZmKCdjaGFuZ2UnLCB0aGlzLm9uU2VwYUJhbmtBY2NvdW50U2VsZWN0aW9uQ2hhbmdlKTtcbiAgICAgICAgY29uc3QgbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLmZvcm1FbCgnaW5wdXRbY2xhc3NePVwic3RyaXBlLXNlcGEtXCJdJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IHZhbHVlIGFuZCBhZGQgbGlzdGVuZXJcbiAgICAgICAgICAgIGNvbnN0IGVsZW0gPSAkKHRoaXMpO1xuICAgICAgICAgICAgZWxlbS5vZmYoJ3Byb3BlcnR5Y2hhbmdlIGtleXVwIGlucHV0IHBhc3RlJywgbWUub25GaWVsZENoYW5nZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgZmllbGQgdmFsdWUgdG8gbm90IGJlIGVtcHR5LiBJZiB0aGUgdmFsaWRhdGlvbiBmYWlsZXMsIHRoZSBmaWVsZCBpcyBtYXJrZWQgaW52YWxpZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBFdmVudCBldmVudFxuICAgICAqIEBwYXJhbSBib29sZWFufHVuZGVmaW5lZCBmb3JjZVxuICAgICAqL1xuICAgIG9uRmllbGRDaGFuZ2UoZXZlbnQsIGZvcmNlKSB7XG4gICAgICAgIGNvbnN0IG1lID0gZXZlbnQuZGF0YS5zY29wZTtcbiAgICAgICAgY29uc3QgZWxlbSA9ICQodGhpcyk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBlbGVtLmF0dHIoJ25hbWUnKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB2YWx1ZSBoYXMgY2hhbmdlZCwgaWYgJ2ZvcmNlJyBpcyBub3Qgc2V0XG4gICAgICAgIGlmICghZm9yY2UgJiYgZWxlbS5kYXRhKCdvbGRWYWwnKSA9PT0gZWxlbS52YWwoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsZW0uZGF0YSgnb2xkVmFsJywgZWxlbS52YWwoKSk7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgdGhlIGZpZWxkXG4gICAgICAgIGlmIChlbGVtLnZhbCgpLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGVsZW0uYWRkQ2xhc3MoJ2lzLWludmFsaWQnKTtcbiAgICAgICAgICAgIG1lLm1hcmtGaWVsZEludmFsaWQobmFtZSwgKCdpbnZhbGlkXycgKyBuYW1lKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtLnJlbW92ZUNsYXNzKCdpcy1pbnZhbGlkJyk7XG4gICAgICAgICAgICBtZS5tYXJrRmllbGRWYWxpZChuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIHZhbGlkYXRpb24gZXJyb3JzIGZvciB0aGUgZmllbGQgd2l0aCB0aGUgZ2l2ZW4gJ2ZpZWxkSWQnIGFuZCB0cmlnZ2VycyBhbiB1cGRhdGUgb2YgdGhlIGRpc3BsYXllZFxuICAgICAqIHZhbGlkYXRpb24gZXJyb3JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIFN0cmluZyBmaWVsZElkXG4gICAgICovXG4gICAgbWFya0ZpZWxkVmFsaWQoZmllbGRJZCkge1xuICAgICAgICBkZWxldGUgdGhpcy5pbnZhbGlkRmllbGRzW2ZpZWxkSWRdO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbGlkYXRpb25FcnJvcnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHRoZSBlcnJvciBtZXNzYWdlIGJhc2VkIG9uIHRoZSBnaXZlbiAnZXJyb3JDb2RlJyBhbmQgJ21lc3NhZ2UnIGFuZCB0cmlnZ2Vyc1xuICAgICAqIGFuIHVwZGF0ZSBvZiB0aGUgZGlzcGxheWVkIHZhbGlkYXRpb24gZXJyb3JzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkSWRcbiAgICAgKiBAcGFyYW0gZXJyb3JDb2RlIChvcHRpb25hbCkgVGhlIGNvZGUgdXNlZCB0byBmaW5kIGEgbG9jYWxpc2VkIGVycm9yIG1lc3NhZ2UuXG4gICAgICogQHBhcmFtIG1lc3NhZ2UgKG9wdGlvYW5sKSBUaGUgZmFsbGJhY2sgZXJyb3IgbWVzc2FnZSB1c2VkIGluIGNhc2Ugbm8gJ2Vycm9yQ29kZScgaXMgcHJvdmlkZWQgb3Igbm8gcmVzcGVjdGl2ZSwgbG9jYWxpc2VkIGRlc2NyaXB0aW9uIGV4aXN0cy5cbiAgICAgKi9cbiAgICBtYXJrRmllbGRJbnZhbGlkKGZpZWxkSWQsIGVycm9yQ29kZSwgbWVzc2FnZSkge1xuICAgICAgICB0aGlzLmludmFsaWRGaWVsZHNbZmllbGRJZF0gPSB0aGlzLm9wdGlvbnMuc25pcHBldHMuZXJyb3JzW2Vycm9yQ29kZSB8fCAnJ10gfHwgbWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcic7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsaWRhdGlvbkVycm9ycygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpcnN0IHZhbGlkYXRlcyB0aGUgZm9ybSBhbmQgcGF5bWVudCBzdGF0ZSBhbmQsIGlmIHRoZSBtYWluIGZvcm0gY2FuIGJlIHN1Ym1pdHRlZCwgZG9lcyBub3RoaW5nIGZ1cnRoZXIuXG4gICAgICogSWYgaG93ZXZlciB0aGUgbWFpbiBmb3JtIGNhbm5vdCBiZSBzdWJtaXR0ZWQsIGJlY2F1c2Ugbm8gY2FyZCBpcyBzZWxlY3RlZCAob3Igbm8gdG9rZW4gd2FzIGNyZWF0ZWQpLCBhIG5ldyBTdHJpcGVcbiAgICAgKiBjYXJkIGFuZCB0b2tlbiBhcmUgZ2VuZXJhdGVkIHVzaW5nIHRoZSBlbnRlcmVkIGNhcmQgZGF0YSBhbmQgc2F2ZWQgaW4gdGhlIGZvcm0sIGJlZm9yZSB0aGUgc3VibWlzc2lvbiBpc1xuICAgICAqIHRyaWdnZXJlZCBhZ2Fpbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqL1xuICAgIG9uRm9ybVN1Ym1pc3Npb24oZXZlbnQpIHtcbiAgICAgICAgY29uc3QgbWUgPSBldmVudC5kYXRhLnNjb3BlO1xuICAgICAgICBjb25zdCBmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAvLyBOb3QgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBwYXltZW50IG1ldGhvZFxuICAgICAgICBpZiAoIW1lLmdldEFjdGl2ZVN0cmlwZVNlcGFGb3JtKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBhIHRva2VuL2NhcmQgd2FzIGdlbmVyYXRlZCBhbmQgaGVuY2UgdGhlIGZvcm0gY2FuIGJlIHN1Ym1pdHRlZFxuICAgICAgICBpZiAobWUuc2VsZWN0ZWRTZXBhQmFua0FjY291bnQpIHtcbiAgICAgICAgICAgIGlmICghbWUuc2VsZWN0ZWRTZXBhQmFua0FjY291bnRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbWUudW5tb3VudFN0cmlwZUVsZW1lbnRzKCk7XG5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBtZS5fY2xpZW50LnBvc3QobWUub3B0aW9ucy5wZXJzaXN0VXJsLCBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRTZXBhQmFua0FjY291bnQ6IG1lLnNlbGVjdGVkU2VwYUJhbmtBY2NvdW50LFxuICAgICAgICAgICAgfSksIChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKHJlcyk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1lLnNlbGVjdGVkU2VwYUJhbmtBY2NvdW50Q2hhbmdlZCA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAvLyBTdWJtaXQgdGhlIGZvcm0gYWdhaW4gdG8gZmluaXNoIHRoZSBwYXltZW50IHByb2Nlc3NcbiAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZXZlbnQgdGhlIGZvcm0gZnJvbSBiZWluZyBzdWJtaXR0ZWQgdW50aWwgYSBuZXcgU3RyaXBlIHRva2VuIGlzIGdlbmVyYXRlZCBhbmQgcmVjZWl2ZWRcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgaW52YWxpZCBmaWVsZHNcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG1lLmludmFsaWRGaWVsZHMpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlbmQgdGhlIGNyZWRpdCBjYXJkIGluZm9ybWF0aW9uIHRvIFN0cmlwZVxuICAgICAgICBtZS5zZXRTdWJtaXRCdXR0b25zTG9hZGluZygpO1xuICAgICAgICBtZS5zdHJpcGVDbGllbnQuY3JlYXRlUGF5bWVudE1ldGhvZCgnc2VwYV9kZWJpdCcsIG1lLnN0cmlwZUVsZW1lbnRzWzBdLCB7XG4gICAgICAgICAgICBiaWxsaW5nX2RldGFpbHM6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtZS5mb3JtRWwoJ2lucHV0LnN0cmlwZS1zZXBhLWFjY291bnQtb3duZXInKS52YWwoKSxcbiAgICAgICAgICAgICAgICBlbWFpbDogbWUuZm9ybUVsKCdpbnB1dC5zdHJpcGUtc2VwYS1lbWFpbCcpLnZhbCgpLFxuICAgICAgICAgICAgICAgIGFkZHJlc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGluZTE6IG1lLmZvcm1FbCgnaW5wdXQuc3RyaXBlLXNlcGEtc3RyZWV0JykudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIGNpdHk6IG1lLmZvcm1FbCgnaW5wdXQuc3RyaXBlLXNlcGEtemlwLWNvZGUnKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgcG9zdGFsX2NvZGU6IG1lLmZvcm1FbCgnaW5wdXQuc3RyaXBlLXNlcGEtY2l0eScpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICBjb3VudHJ5OiBtZS5mb3JtRWwoJ3NlbGVjdC5zdHJpcGUtc2VwYS1jb3VudHJ5JykudmFsKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5lcnJvcikge1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgcmVzZXQgdGhlIHN1Ym1pdCBidXR0b25zIGluIGNhc2Ugb2YgYW4gZXJyb3IsIGJlY2F1c2Ugb3RoZXJ3aXNlIHRoZSBmb3JtIGlzIHN1Ym1pdHRlZCBhZ2FpblxuICAgICAgICAgICAgICAgIC8vIHJpZ2h0IGF3YXlzIGFuZCBoZW5jZSB3ZSB3YW50IHRoZSBidXR0b25zIHRvIHN0YXkgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICBtZS5yZXNldFN1Ym1pdEJ1dHRvbnMoKTtcblxuICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgbWUuaGFuZGxlU3RyaXBlRXJyb3IocmVzdWx0LmVycm9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY2FyZCBpbmZvcm1hdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHNlcGFCYW5rQWNjb3VudCA9IHJlc3VsdC5wYXltZW50TWV0aG9kLnNlcGFfZGViaXQ7XG4gICAgICAgICAgICAgICAgc2VwYUJhbmtBY2NvdW50LmlkID0gcmVzdWx0LnBheW1lbnRNZXRob2QuaWQ7XG4gICAgICAgICAgICAgICAgc2VwYUJhbmtBY2NvdW50Lm5hbWUgPSBtZS5mb3JtRWwoJy5zdHJpcGUtc2VwYS1hY2NvdW50LW93bmVyJykudmFsKCk7XG4gICAgICAgICAgICAgICAgbWUuc2V0U2VsZWN0ZWRTZXBhQmFua0FjY291bnQoc2VwYUJhbmtBY2NvdW50KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHNhdmVTZXBhQmFua0FjY291bnQgPSBtZS5mb3JtRWwoJy5zdHJpcGUtc2F2ZS1zZXBhLWJhbmstYWNjb3VudCcpLmlzKCc6Y2hlY2tlZCcpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLl9jbGllbnQucG9zdChtZS5vcHRpb25zLnBlcnNpc3RVcmwsIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkU2VwYUJhbmtBY2NvdW50OiBzZXBhQmFua0FjY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlU2VwYUJhbmtBY2NvdW50LFxuICAgICAgICAgICAgICAgICAgICB9KSwgKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VibWl0IHRoZSBmb3JtIGFnYWluIHRvIGZpbmlzaCB0aGUgcGF5bWVudCBwcm9jZXNzXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tZGVidWdnZXIgKi9cbiAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgY2hhbmdlIG9ic2VydmVyIHRvIHRoZSBjYXJkIHNlbGVjdGlvbiBmaWVsZC4gSWYgYW4gZXhpc3RpbmcgY2FyZCBpcyBzZWxlY3RlZCwgYWxsIGZvcm0gZmllbGRzIGFyZSBoaWRkZW5cbiAgICAgKiBhbmQgdGhlIGNhcmQncyBTdHJpcGUgaW5mb3JtYXRpb24gaXMgYWRkZWQgdG8gdGhlIGZvcm0uIElmIHRoZSAnbmV3JyBvcHRpb24gaXMgc2VsZWN0ZWQsIGFsbCBmaWVsZHMgbWFkZSB2aXNpYmxlXG4gICAgICogYW5kIHRoZSBTdHJpcGUgY2FyZCBpbmZvIGlzIHJlbW92ZWQgZnJvbSB0aGUgZm9ybS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBPYmplY3QgZXZlbnRcbiAgICAgKi9cbiAgICBvblNlcGFCYW5rQWNjb3VudFNlbGVjdGlvbkNoYW5nZShldmVudCkge1xuICAgICAgICBjb25zdCBtZSA9IGV2ZW50LmRhdGEuc2NvcGU7XG4gICAgICAgIGNvbnN0IGVsZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgIGlmIChlbGVtLnZhbCgpID09PSAnbmV3Jykge1xuICAgICAgICAgICAgLy8gQSBuZXcsIGVtcHR5IGNhcmQgd2FzIHNlbGVjdGVkXG4gICAgICAgICAgICBtZS5zZXRTZWxlY3RlZFNlcGFCYW5rQWNjb3VudChudWxsKTtcblxuICAgICAgICAgICAgLy8gTWFrZSB2YWxpZGF0aW9uIGVycm9ycyB2aXNpYmxlXG4gICAgICAgICAgICBtZS51cGRhdGVWYWxpZGF0aW9uRXJyb3JzKCk7XG5cbiAgICAgICAgICAgIC8vIFNob3cgdGhlIHNhdmUgY2hlY2sgYm94XG4gICAgICAgICAgICBtZS5mb3JtRWwoJy5zdHJpcGUtc2VwYS1maWVsZCcpLnNob3coKTtcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1zZXBhLXJvdycpLnNob3coKTtcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1zYXZlLXNlcGEtYmFuay1hY2NvdW50Jykuc2hvdygpLnByb3AoJ2NoZWNrZWQnLCB0cnVlKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmluZCB0aGUgc2VsZWN0ZWQgY2FyZFxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lLm9wdGlvbnMuYXZhaWxhYmxlU2VwYUJhbmtBY2NvdW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTZXBhQmFua0FjY291bnQgPSBtZS5vcHRpb25zLmF2YWlsYWJsZVNlcGFCYW5rQWNjb3VudHNbaV07XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRTZXBhQmFua0FjY291bnQuaWQgIT09IGVsZW0udmFsKCkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgY2FyZFxuICAgICAgICAgICAgaWYgKCFtZS5zZWxlY3RlZFNlcGFCYW5rQWNjb3VudCB8fCBtZS5zZWxlY3RlZFNlcGFCYW5rQWNjb3VudC5pZCAhPT0gc2VsZWN0ZWRTZXBhQmFua0FjY291bnQuaWQpIHtcbiAgICAgICAgICAgICAgICBtZS5zZXRTZWxlY3RlZFNlcGFCYW5rQWNjb3VudChzZWxlY3RlZFNlcGFCYW5rQWNjb3VudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhpZGUgdmFsaWRhdGlvbiBlcnJvcnNcbiAgICAgICAgICAgIG1lLmZvcm1FbCgnLnN0cmlwZS1wYXltZW50LXZhbGlkYXRpb24tZXJyb3ItYm94JykuaGlkZSgpO1xuXG4gICAgICAgICAgICAvLyBIaWRlIGFsbCBzZXBhIGZpZWxkc1xuICAgICAgICAgICAgbWUuZm9ybUVsKCcuc3RyaXBlLXNlcGEtZmllbGQnKS5oaWRlKCk7XG4gICAgICAgICAgICBtZS5mb3JtRWwoJy5zdHJpcGUtc2VwYS1yb3cnKS5oaWRlKCk7XG4gICAgICAgICAgICBtZS5mb3JtRWwoJy5zdHJpcGUtc2F2ZS1iYW5rLWFjY291bnQnKS5oaWRlKCk7XG5cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYm90aCBzdWJtaXQgYnV0dG9ucyBvbiB0aGUgcGFnZSBhbmQgYWRkcyB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgYXMgd2VsbCBhcyB0aGUgbG9hZGluZyBpbmRpY2F0b3IgdG8gZWFjaFxuICAgICAqIG9mIHRoZW0uXG4gICAgICovXG4gICAgc2V0U3VibWl0QnV0dG9uc0xvYWRpbmcoKSB7XG4gICAgICAgIC8vIFJlc2V0IHRoZSBidXR0b24gZmlyc3QgdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGFkZGVkIG11bHRpcGxlIGxvYWRpbmcgaW5kaWNhdG9yc1xuICAgICAgICB0aGlzLnJlc2V0U3VibWl0QnV0dG9ucygpO1xuICAgICAgICAkKCcjY29uZmlybVBheW1lbnRGb3JtIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdLCAuY29uZmlybS0tYWN0aW9ucyBidXR0b25bZm9ybT1cImNvbmZpcm1QYXltZW50Rm9ybVwiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmh0bWwoJCh0aGlzKS50ZXh0KCkgKyAnPGRpdiBjbGFzcz1cImxvYWRlclwiIHJvbGU9XCJzdGF0dXNcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTt0b3A6IDRweFwiPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPkxvYWRpbmcuLi48L3NwYW4+PC9kaXY+JykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgYm90aCBzdWJtaXQgYnV0dG9ucyBvbiB0aGUgcGFnZSBhbmQgcmVzZXRzIHRoZW0gYnkgcmVtb3ZpbmcgdGhlICdkaXNhYmxlZCcgYXR0cmlidXRlIGFzIHdlbGwgYXMgdGhlXG4gICAgICogbG9hZGluZyBpbmRpY2F0b3IuXG4gICAgICovXG4gICAgcmVzZXRTdWJtaXRCdXR0b25zKCkge1xuICAgICAgICAkKCcjY29uZmlybVBheW1lbnRGb3JtIGJ1dHRvblt0eXBlPVwic3VibWl0XCJdLCAuY29uZmlybS0tYWN0aW9ucyBidXR0b25bZm9ybT1cImNvbmZpcm1QYXltZW50Rm9ybVwiXScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJykuZmluZCgnLmxvYWRlcicpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0cmFuc2xhdGVkIGVycm9yIG1lc3NhZ2UgaW4gdGhlIGdlbmVyYWwgZXJyb3IgYm94LlxuICAgICAqXG4gICAgICogQHBhcmFtIHN0cmlwZUVycm9yXG4gICAgICovXG4gICAgaGFuZGxlU3RyaXBlRXJyb3Ioc3RyaXBlRXJyb3IpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZVRvRGlzcGxheSA9IHRoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcltzdHJpcGVFcnJvci5jb2RlIHx8ICcnXSB8fCBzdHJpcGVFcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJztcbiAgICAgICAgdGhpcy5mb3JtRWwoJy5zdHJpcGUtcGF5bWVudC1lcnJvci1ib3gnKS5zaG93KCkuZmluZCgnLmFsZXJ0LWNvbnRlbnQnKS5odG1sKGAke3RoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcn06ICR7bWVzc2FnZVRvRGlzcGxheX1gKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUcmllcyB0byBmaW5kIGEgc3RyaXBlIGNhcmQgZm9ybSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgcGF5bWVudCBtZXRob2QuIFRoYXQgaXMsIGlmIGEgc3RyaXBlIGNhcmQgcGF5bWVudFxuICAgICAqIG1ldGhvZCBpcyBzZWxlY3RlZCwgaXRzIGZvcm0gaXMgcmV0dXJuZWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGpRdWVyeXxudWxsXG4gICAgICovXG4gICAgZ2V0QWN0aXZlU3RyaXBlU2VwYUZvcm0oKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSAkKCdpbnB1dFtpZF49XCJwYXltZW50TWV0aG9kXCJdOmNoZWNrZWQnKS5jbG9zZXN0KCcucGF5bWVudC1tZXRob2QnKS5maW5kKCcuc3RyaXBlLXBheW1lbnQtc2VwYS1mb3JtJyk7XG5cbiAgICAgICAgcmV0dXJuIChmb3JtLmxlbmd0aCA+IDApID8gZm9ybS5maXJzdCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICBnZXRTdHJpcGVTZXBhRm9ybSgpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9ICQoJ2lucHV0W2lkXj1cInBheW1lbnRNZXRob2RcIl0nKS5jbG9zZXN0KCcucGF5bWVudC1tZXRob2QnKS5maW5kKCcuc3RyaXBlLXBheW1lbnQtc2VwYS1mb3JtJyk7XG5cbiAgICAgICAgcmV0dXJuIChmb3JtLmxlbmd0aCA+IDApID8gZm9ybS5maXJzdCgpIDogbnVsbDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGEgalF1ZXJ5IHF1ZXJ5IG9uIHRoZSBET00gdHJlZSB1bmRlciB0aGUgYWN0aXZlIHN0cmlwZSBjYXJkIGZvcm0gdXNpbmcgdGhlIGdpdmVuIHNlbGVjdG9yLiBUaGlzIG1ldGhvZFxuICAgICAqIHNob3VsZCBiZSB1c2VkIHdoZW4gc2VsZWN0aW5nIGFueSBmaWVsZHMgdGhhdCBhcmUgcGFydCBvZiBhIFN0cmlwZSBjYXJkIHBheW1lbnQgZm9ybS4gSWYgbm8gU3RyaXBlIGNhcmQgZm9ybSBpc1xuICAgICAqIGFjdGl2ZSwgYW4gZW1wdHkgcXVlcnkgcmVzdWx0IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIFN0cmluZyBzZWxlY3RvclxuICAgICAqIEByZXR1cm4galF1ZXJ5XG4gICAgICovXG4gICAgZm9ybUVsKHNlbGVjdG9yKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmdldEFjdGl2ZVN0cmlwZVNlcGFGb3JtKCk7XG4gICAgICAgIHJldHVybiAoZm9ybSkgPyBmb3JtLmZpbmQoc2VsZWN0b3IpIDogJCgnc3RyaXBlX3BheW1lbnRfYmFua19hY2NvdW50X25vdF9mb3VuZCcpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4galF1ZXJ5IFRoZSBtYWluIHBheW1lbnQgc2VsZWN0aW9uIGZvcm0gZWxlbWVudC5cbiAgICAgKi9cbiAgICBmaW5kRm9ybSgpIHtcbiAgICAgICAgcmV0dXJuICQoJyNjb25maXJtUGF5bWVudEZvcm0nKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQWNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBRUE7Ozs7OztBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBSEE7QUFEQTtBQVlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUVBO0FBQ0E7OztBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7O0FBR0E7QUFDQTtBQUNBOzs7O0FBamNBO0FBQ0E7QUFEQTtBQUVBOzs7QUFHQTtBQUVBO0FBRUE7QUFFQTtBQVZBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///I6n5\n");

/***/ }),

/***/ "a+Fl":
/*!**************************************************************************************************************************************************************************!*\
  !*** /home/felix/PhpstormProjects/shopware-6/plugins/ShopwareStripePayment/src/Resources/storefront/digital-wallet-selection/stripe-payment.digital-wallet-selection.js ***!
  \**************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return StripePaymentDigitalWalletSelection; });\n/* harmony import */ var src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/script/service/http-client.service */ \"k8s9\");\n/* harmony import */ var src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/script/plugin-system/plugin.class */ \"FGIj\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* eslint-disable import/no-unresolved */\n\n\n\nvar StripePaymentDigitalWalletSelection =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(StripePaymentDigitalWalletSelection, _Plugin);\n\n  function StripePaymentDigitalWalletSelection() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, StripePaymentDigitalWalletSelection);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(StripePaymentDigitalWalletSelection)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"paymentApiAvailable\", false);\n\n    return _this;\n  }\n\n  _createClass(StripePaymentDigitalWalletSelection, [{\n    key: \"init\",\n    value: function init() {\n      this._client = new src_script_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"](window.accessKey, window.contextToken);\n      this.options = _extends(StripePaymentDigitalWalletSelection.options, this.options || {});\n      /* eslint-disable no-undef */\n\n      this.stripeClient = Stripe(this.options.stripePublicKey);\n      this.paymentDisplayItems = this.options.lineItems.map(function (item) {\n        return {\n          label: \"\".concat(item.quantity, \"x \").concat(item.label),\n          amount: Math.round(item.price.totalPrice * 100)\n        };\n      });\n\n      if (this.options.shippingCost) {\n        this.paymentDisplayItems.push({\n          label: this.options.snippets.shipping_cost,\n          amount: Math.round(this.options.shippingCost * 100)\n        });\n      }\n\n      this.findForm().on('submit', this.onFormSubmission.bind(this));\n      this.createPaymentRequest(this.options.countryCode, this.options.currencyCode, this.options.amount);\n    }\n  }, {\n    key: \"createPaymentRequest\",\n    value: function createPaymentRequest(countryCode, currencyCode, amount) {\n      var _this2 = this;\n\n      this.paymentRequest = this.stripeClient.paymentRequest({\n        country: countryCode.toUpperCase(),\n        currency: currencyCode.toLowerCase(),\n        total: {\n          label: this.options.snippets.total,\n          amount: Math.round(amount * 100)\n        },\n        displayItems: this.paymentDisplayItems\n      }); // Add a listener for once the payment is created. This happens once the user selects \"pay\" in his browser\n      // specific payment popup\n\n      this.paymentRequest.on('paymentmethod', function (paymentResponse) {\n        _this2.paymentMethodId = paymentResponse.paymentMethod.id; // Complete the browser's payment flow\n\n        paymentResponse.complete('success'); // Add the created Stripe token to the form and submit it\n\n        var form = _this2.findForm();\n\n        $('input[name=\"stripeDigitalWalletPaymentMethodId\"]').remove();\n        $('<input type=\"hidden\" name=\"stripeDigitalWalletPaymentMethodId\" />').val(_this2.paymentMethodId).appendTo(form);\n        form.submit();\n      }); // Add listener for cancelled payment flow\n\n      this.paymentRequest.on('cancel', function () {\n        _this2.paymentMethodId = null;\n\n        _this2.handleStripeError(_this2.options.snippets.errors.payment_cancelled);\n\n        _this2.resetSubmitButton();\n      }); // Check for availability of the payment api\n\n      this.paymentRequest.canMakePayment().then(function (result) {\n        _this2.paymentApiAvailable = !!result;\n\n        if (_this2.paymentApiAvailable) {\n          return;\n        }\n\n        if (!_this2.isSecureConnection()) {\n          _this2.handleStripeError(_this2.options.snippets.errors.connection_not_secure);\n\n          return;\n        }\n\n        _this2.handleStripeError(_this2.options.snippets.errors.payment_api_unavailable);\n      });\n    }\n  }, {\n    key: \"isSecureConnection\",\n    value: function isSecureConnection() {\n      return window.location.protocol === 'https:';\n    }\n    /**\n     * First validates the form and payment state and, if the main form can be submitted, does nothing further.\n     * If however the main form cannot be submitted, because no card is selected (or no token was created), a new Stripe\n     * card and token are generated using the entered card data and saved in the form, before the submission is\n     * triggered again.\n     *\n     * @param event\n     */\n\n  }, {\n    key: \"onFormSubmission\",\n    value: function onFormSubmission(event) {\n      if ($('input#tos').length === 1 && !$('input#tos').is(':checked')) {\n        return undefined;\n      } // Check if a Stripe payment method was generated and hence the form can be submitted\n\n\n      if (this.paymentMethodId) {\n        return undefined;\n      } // Prevent the form from being submitted until a new Stripe payment method is generated and received\n\n\n      event.preventDefault(); // We have to manually check whether this site is served via HTTPS before checking the digital wallet payments availability\n      // using Stripe.js. Even though Stripe.js checks the used protocol and declines the payment if not served via\n      // HTTPS, only a generic 'not available' error message is returned and the HTTPS warning is logged to the\n      // console. We however want to show a specific error message that informs about the lack of security.\n\n      if (!this.isSecureConnection()) {\n        this.resetSubmitButton();\n        this.handleStripeError(this.options.snippets.errors.connection_not_secure);\n        return undefined;\n      } // Check for general availability of the digital wallet payments\n\n\n      if (!this.paymentApiAvailable) {\n        this.resetSubmitButton();\n        this.handleStripeError(this.options.snippets.errors.payment_api_unavailable);\n        return undefined;\n      }\n\n      $('#stripe-payment-checkout-error-box').hide();\n      this.setSubmitButtonLoading(); // Process the payment\n\n      this.paymentRequest.show();\n    }\n    /**\n     * Finds the submit button on the page and adds the 'disabled' attribute as well as a loading indicator.\n     */\n\n  }, {\n    key: \"setSubmitButtonLoading\",\n    value: function setSubmitButtonLoading() {\n      var submitButton = $('#confirmFormSubmit');\n      submitButton.html('<div class=\"loader\" role=\"status\" style=\"position: relative;top: 4px\"><span class=\"sr-only\">Loading...</span></div>' + submitButton.html()).attr('disabled', 'disabled');\n    }\n    /**\n     * Finds the submit button on the page and resets it by removing the 'disabled' attribute as well as the\n     * loading indicator.\n     */\n\n  }, {\n    key: \"resetSubmitButton\",\n    value: function resetSubmitButton() {\n      $('#confirmFormSubmit').removeAttr('disabled').find('.loader').remove();\n    }\n    /**\n     * Sets the given message in the general error box and scrolls the page to make it visible.\n     *\n     * @param {String} message\n     */\n\n  }, {\n    key: \"handleStripeError\",\n    value: function handleStripeError(message) {\n      $('#stripe-payment-checkout-error-box').show().find('.alert-content').html(\"\".concat(this.options.snippets.error, \": \").concat(message));\n      window.scrollTo({\n        top: 0,\n        behavior: 'smooth'\n      });\n    }\n    /**\n     * @return jQuery The main payment selection form element.\n     */\n\n  }, {\n    key: \"findForm\",\n    value: function findForm() {\n      return $('#confirmOrderForm');\n    }\n  }]);\n\n  return StripePaymentDigitalWalletSelection;\n}(src_script_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\n\n_defineProperty(StripePaymentDigitalWalletSelection, \"options\", {\n  /**\n   * @type string\n   */\n  stripePublicKey: '',\n  lineItems: [],\n  countryCode: 'DE',\n  currencyCode: 'EUR',\n  snippets: {}\n});\n\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! /home/felix/PhpstormProjects/shopware-6/shopware-development/vendor/shopware/platform/src/Storefront/Resources/node_modules/jquery/dist/jquery.slim.js */ \"wpjq\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYStGbC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vaG9tZS9mZWxpeC9QaHBzdG9ybVByb2plY3RzL3Nob3B3YXJlLTYvcGx1Z2lucy9TaG9wd2FyZVN0cmlwZVBheW1lbnQvc3JjL1Jlc291cmNlcy9zdG9yZWZyb250L2RpZ2l0YWwtd2FsbGV0LXNlbGVjdGlvbi9zdHJpcGUtcGF5bWVudC5kaWdpdGFsLXdhbGxldC1zZWxlY3Rpb24uanM/MGY0NCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8tdW5yZXNvbHZlZCAqL1xuXG5pbXBvcnQgSHR0cENsaWVudCBmcm9tICdzcmMvc2NyaXB0L3NlcnZpY2UvaHR0cC1jbGllbnQuc2VydmljZSc7XG5pbXBvcnQgUGx1Z2luIGZyb20gJ3NyYy9zY3JpcHQvcGx1Z2luLXN5c3RlbS9wbHVnaW4uY2xhc3MnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdHJpcGVQYXltZW50RGlnaXRhbFdhbGxldFNlbGVjdGlvbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc3RhdGljIG9wdGlvbnMgPSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIHN0cmlwZVB1YmxpY0tleTogJycsXG5cbiAgICAgICAgbGluZUl0ZW1zOiBbXSxcblxuICAgICAgICBjb3VudHJ5Q29kZTogJ0RFJyxcblxuICAgICAgICBjdXJyZW5jeUNvZGU6ICdFVVInLFxuXG4gICAgICAgIHNuaXBwZXRzOiB7fSxcbiAgICB9O1xuXG4gICAgcGF5bWVudEFwaUF2YWlsYWJsZSA9IGZhbHNlO1xuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gbmV3IEh0dHBDbGllbnQod2luZG93LmFjY2Vzc0tleSwgd2luZG93LmNvbnRleHRUb2tlbik7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zID0gT2JqZWN0LmFzc2lnbihTdHJpcGVQYXltZW50RGlnaXRhbFdhbGxldFNlbGVjdGlvbi5vcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30pO1xuXG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovXG4gICAgICAgIHRoaXMuc3RyaXBlQ2xpZW50ID0gU3RyaXBlKHRoaXMub3B0aW9ucy5zdHJpcGVQdWJsaWNLZXkpO1xuXG4gICAgICAgIHRoaXMucGF5bWVudERpc3BsYXlJdGVtcyA9IHRoaXMub3B0aW9ucy5saW5lSXRlbXMubWFwKChpdGVtKSA9PiAoe1xuICAgICAgICAgICAgbGFiZWw6IGAke2l0ZW0ucXVhbnRpdHl9eCAke2l0ZW0ubGFiZWx9YCxcbiAgICAgICAgICAgIGFtb3VudDogTWF0aC5yb3VuZChpdGVtLnByaWNlLnRvdGFsUHJpY2UgKiAxMDApLFxuICAgICAgICB9KSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hpcHBpbmdDb3N0KSB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnREaXNwbGF5SXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHRoaXMub3B0aW9ucy5zbmlwcGV0cy5zaGlwcGluZ19jb3N0LFxuICAgICAgICAgICAgICAgIGFtb3VudDogTWF0aC5yb3VuZCh0aGlzLm9wdGlvbnMuc2hpcHBpbmdDb3N0ICogMTAwKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maW5kRm9ybSgpLm9uKCdzdWJtaXQnLCB0aGlzLm9uRm9ybVN1Ym1pc3Npb24uYmluZCh0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5jcmVhdGVQYXltZW50UmVxdWVzdChcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jb3VudHJ5Q29kZSxcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5jdXJyZW5jeUNvZGUsXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuYW1vdW50XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY3JlYXRlUGF5bWVudFJlcXVlc3QoY291bnRyeUNvZGUsIGN1cnJlbmN5Q29kZSwgYW1vdW50KSB7XG4gICAgICAgIHRoaXMucGF5bWVudFJlcXVlc3QgPSB0aGlzLnN0cmlwZUNsaWVudC5wYXltZW50UmVxdWVzdCh7XG4gICAgICAgICAgICBjb3VudHJ5OiBjb3VudHJ5Q29kZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgICAgICAgY3VycmVuY3k6IGN1cnJlbmN5Q29kZS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgdG90YWw6IHtcbiAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5vcHRpb25zLnNuaXBwZXRzLnRvdGFsLFxuICAgICAgICAgICAgICAgIGFtb3VudDogTWF0aC5yb3VuZChhbW91bnQgKiAxMDApLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRpc3BsYXlJdGVtczogdGhpcy5wYXltZW50RGlzcGxheUl0ZW1zLFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYSBsaXN0ZW5lciBmb3Igb25jZSB0aGUgcGF5bWVudCBpcyBjcmVhdGVkLiBUaGlzIGhhcHBlbnMgb25jZSB0aGUgdXNlciBzZWxlY3RzIFwicGF5XCIgaW4gaGlzIGJyb3dzZXJcbiAgICAgICAgLy8gc3BlY2lmaWMgcGF5bWVudCBwb3B1cFxuICAgICAgICB0aGlzLnBheW1lbnRSZXF1ZXN0Lm9uKCdwYXltZW50bWV0aG9kJywgKHBheW1lbnRSZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYXltZW50TWV0aG9kSWQgPSBwYXltZW50UmVzcG9uc2UucGF5bWVudE1ldGhvZC5pZDtcblxuICAgICAgICAgICAgLy8gQ29tcGxldGUgdGhlIGJyb3dzZXIncyBwYXltZW50IGZsb3dcbiAgICAgICAgICAgIHBheW1lbnRSZXNwb25zZS5jb21wbGV0ZSgnc3VjY2VzcycpO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGNyZWF0ZWQgU3RyaXBlIHRva2VuIHRvIHRoZSBmb3JtIGFuZCBzdWJtaXQgaXRcbiAgICAgICAgICAgIGNvbnN0IGZvcm0gPSB0aGlzLmZpbmRGb3JtKCk7XG4gICAgICAgICAgICAkKCdpbnB1dFtuYW1lPVwic3RyaXBlRGlnaXRhbFdhbGxldFBheW1lbnRNZXRob2RJZFwiXScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgJCgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwic3RyaXBlRGlnaXRhbFdhbGxldFBheW1lbnRNZXRob2RJZFwiIC8+JylcbiAgICAgICAgICAgICAgICAudmFsKHRoaXMucGF5bWVudE1ldGhvZElkKVxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhmb3JtKTtcbiAgICAgICAgICAgIGZvcm0uc3VibWl0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgY2FuY2VsbGVkIHBheW1lbnQgZmxvd1xuICAgICAgICB0aGlzLnBheW1lbnRSZXF1ZXN0Lm9uKCdjYW5jZWwnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnRNZXRob2RJZCA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVN0cmlwZUVycm9yKHRoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcnMucGF5bWVudF9jYW5jZWxsZWQpO1xuICAgICAgICAgICAgdGhpcy5yZXNldFN1Ym1pdEJ1dHRvbigpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDaGVjayBmb3IgYXZhaWxhYmlsaXR5IG9mIHRoZSBwYXltZW50IGFwaVxuICAgICAgICB0aGlzLnBheW1lbnRSZXF1ZXN0LmNhbk1ha2VQYXltZW50KCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBheW1lbnRBcGlBdmFpbGFibGUgPSAhIXJlc3VsdDtcbiAgICAgICAgICAgIGlmICh0aGlzLnBheW1lbnRBcGlBdmFpbGFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTZWN1cmVDb25uZWN0aW9uKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVN0cmlwZUVycm9yKHRoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcnMuY29ubmVjdGlvbl9ub3Rfc2VjdXJlKTtcblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RyaXBlRXJyb3IodGhpcy5vcHRpb25zLnNuaXBwZXRzLmVycm9ycy5wYXltZW50X2FwaV91bmF2YWlsYWJsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzU2VjdXJlQ29ubmVjdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlyc3QgdmFsaWRhdGVzIHRoZSBmb3JtIGFuZCBwYXltZW50IHN0YXRlIGFuZCwgaWYgdGhlIG1haW4gZm9ybSBjYW4gYmUgc3VibWl0dGVkLCBkb2VzIG5vdGhpbmcgZnVydGhlci5cbiAgICAgKiBJZiBob3dldmVyIHRoZSBtYWluIGZvcm0gY2Fubm90IGJlIHN1Ym1pdHRlZCwgYmVjYXVzZSBubyBjYXJkIGlzIHNlbGVjdGVkIChvciBubyB0b2tlbiB3YXMgY3JlYXRlZCksIGEgbmV3IFN0cmlwZVxuICAgICAqIGNhcmQgYW5kIHRva2VuIGFyZSBnZW5lcmF0ZWQgdXNpbmcgdGhlIGVudGVyZWQgY2FyZCBkYXRhIGFuZCBzYXZlZCBpbiB0aGUgZm9ybSwgYmVmb3JlIHRoZSBzdWJtaXNzaW9uIGlzXG4gICAgICogdHJpZ2dlcmVkIGFnYWluLlxuICAgICAqXG4gICAgICogQHBhcmFtIGV2ZW50XG4gICAgICovXG4gICAgb25Gb3JtU3VibWlzc2lvbihldmVudCkge1xuICAgICAgICBpZiAoJCgnaW5wdXQjdG9zJykubGVuZ3RoID09PSAxICYmICEkKCdpbnB1dCN0b3MnKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIGEgU3RyaXBlIHBheW1lbnQgbWV0aG9kIHdhcyBnZW5lcmF0ZWQgYW5kIGhlbmNlIHRoZSBmb3JtIGNhbiBiZSBzdWJtaXR0ZWRcbiAgICAgICAgaWYgKHRoaXMucGF5bWVudE1ldGhvZElkKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUHJldmVudCB0aGUgZm9ybSBmcm9tIGJlaW5nIHN1Ym1pdHRlZCB1bnRpbCBhIG5ldyBTdHJpcGUgcGF5bWVudCBtZXRob2QgaXMgZ2VuZXJhdGVkIGFuZCByZWNlaXZlZFxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIFdlIGhhdmUgdG8gbWFudWFsbHkgY2hlY2sgd2hldGhlciB0aGlzIHNpdGUgaXMgc2VydmVkIHZpYSBIVFRQUyBiZWZvcmUgY2hlY2tpbmcgdGhlIGRpZ2l0YWwgd2FsbGV0IHBheW1lbnRzIGF2YWlsYWJpbGl0eVxuICAgICAgICAvLyB1c2luZyBTdHJpcGUuanMuIEV2ZW4gdGhvdWdoIFN0cmlwZS5qcyBjaGVja3MgdGhlIHVzZWQgcHJvdG9jb2wgYW5kIGRlY2xpbmVzIHRoZSBwYXltZW50IGlmIG5vdCBzZXJ2ZWQgdmlhXG4gICAgICAgIC8vIEhUVFBTLCBvbmx5IGEgZ2VuZXJpYyAnbm90IGF2YWlsYWJsZScgZXJyb3IgbWVzc2FnZSBpcyByZXR1cm5lZCBhbmQgdGhlIEhUVFBTIHdhcm5pbmcgaXMgbG9nZ2VkIHRvIHRoZVxuICAgICAgICAvLyBjb25zb2xlLiBXZSBob3dldmVyIHdhbnQgdG8gc2hvdyBhIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgdGhhdCBpbmZvcm1zIGFib3V0IHRoZSBsYWNrIG9mIHNlY3VyaXR5LlxuICAgICAgICBpZiAoIXRoaXMuaXNTZWN1cmVDb25uZWN0aW9uKCkpIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdWJtaXRCdXR0b24oKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlU3RyaXBlRXJyb3IodGhpcy5vcHRpb25zLnNuaXBwZXRzLmVycm9ycy5jb25uZWN0aW9uX25vdF9zZWN1cmUpO1xuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIGdlbmVyYWwgYXZhaWxhYmlsaXR5IG9mIHRoZSBkaWdpdGFsIHdhbGxldCBwYXltZW50c1xuICAgICAgICBpZiAoIXRoaXMucGF5bWVudEFwaUF2YWlsYWJsZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFN1Ym1pdEJ1dHRvbigpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTdHJpcGVFcnJvcih0aGlzLm9wdGlvbnMuc25pcHBldHMuZXJyb3JzLnBheW1lbnRfYXBpX3VuYXZhaWxhYmxlKTtcblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNzdHJpcGUtcGF5bWVudC1jaGVja291dC1lcnJvci1ib3gnKS5oaWRlKCk7XG5cbiAgICAgICAgdGhpcy5zZXRTdWJtaXRCdXR0b25Mb2FkaW5nKCk7XG5cbiAgICAgICAgLy8gUHJvY2VzcyB0aGUgcGF5bWVudFxuICAgICAgICB0aGlzLnBheW1lbnRSZXF1ZXN0LnNob3coKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgc3VibWl0IGJ1dHRvbiBvbiB0aGUgcGFnZSBhbmQgYWRkcyB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgYXMgd2VsbCBhcyBhIGxvYWRpbmcgaW5kaWNhdG9yLlxuICAgICAqL1xuICAgIHNldFN1Ym1pdEJ1dHRvbkxvYWRpbmcoKSB7XG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9ICQoJyNjb25maXJtRm9ybVN1Ym1pdCcpO1xuICAgICAgICBzdWJtaXRCdXR0b24uaHRtbCgnPGRpdiBjbGFzcz1cImxvYWRlclwiIHJvbGU9XCJzdGF0dXNcIiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTt0b3A6IDRweFwiPjxzcGFuIGNsYXNzPVwic3Itb25seVwiPkxvYWRpbmcuLi48L3NwYW4+PC9kaXY+JyArIHN1Ym1pdEJ1dHRvbi5odG1sKCkpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHN1Ym1pdCBidXR0b24gb24gdGhlIHBhZ2UgYW5kIHJlc2V0cyBpdCBieSByZW1vdmluZyB0aGUgJ2Rpc2FibGVkJyBhdHRyaWJ1dGUgYXMgd2VsbCBhcyB0aGVcbiAgICAgKiBsb2FkaW5nIGluZGljYXRvci5cbiAgICAgKi9cbiAgICByZXNldFN1Ym1pdEJ1dHRvbigpIHtcbiAgICAgICAgJCgnI2NvbmZpcm1Gb3JtU3VibWl0JykucmVtb3ZlQXR0cignZGlzYWJsZWQnKS5maW5kKCcubG9hZGVyJykucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZ2l2ZW4gbWVzc2FnZSBpbiB0aGUgZ2VuZXJhbCBlcnJvciBib3ggYW5kIHNjcm9sbHMgdGhlIHBhZ2UgdG8gbWFrZSBpdCB2aXNpYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2VcbiAgICAgKi9cbiAgICBoYW5kbGVTdHJpcGVFcnJvcihtZXNzYWdlKSB7XG4gICAgICAgICQoJyNzdHJpcGUtcGF5bWVudC1jaGVja291dC1lcnJvci1ib3gnKS5zaG93KCkuZmluZCgnLmFsZXJ0LWNvbnRlbnQnKS5odG1sKGAke3RoaXMub3B0aW9ucy5zbmlwcGV0cy5lcnJvcn06ICR7bWVzc2FnZX1gKTtcbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHtcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJyxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiBqUXVlcnkgVGhlIG1haW4gcGF5bWVudCBzZWxlY3Rpb24gZm9ybSBlbGVtZW50LlxuICAgICAqL1xuICAgIGZpbmRGb3JtKCkge1xuICAgICAgICByZXR1cm4gJCgnI2NvbmZpcm1PcmRlckZvcm0nKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBO0FBQ0E7Ozs7OztBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFBQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUVBO0FBS0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFQQTtBQVdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Ozs7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBOzs7Ozs7QUFHQTtBQUNBO0FBQ0E7Ozs7QUF0TEE7QUFDQTtBQURBO0FBRUE7OztBQUdBO0FBRUE7QUFFQTtBQUVBO0FBRUE7QUFaQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///a+Fl\n");

/***/ }),

/***/ "qW9D":
/*!**************************************************************************************************************!*\
  !*** /home/felix/PhpstormProjects/shopware-6/plugins/ShopwareStripePayment/src/Resources/storefront/main.js ***!
  \**************************************************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _card_selection_stripe_payment_card_selection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card-selection/stripe-payment.card-selection */ \"/TfR\");\n/* harmony import */ var _sepa_selection_stripe_payment_sepa_selection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sepa-selection/stripe-payment.sepa-selection */ \"I6n5\");\n/* harmony import */ var _digital_wallet_selection_stripe_payment_digital_wallet_selection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./digital-wallet-selection/stripe-payment.digital-wallet-selection */ \"a+Fl\");\n// Import all necessary Storefront plugins and scss files\n\n\n // Register them via the existing PluginManager\n\nvar PluginManager = window.PluginManager;\nPluginManager.register('StripePaymentCardSelection', _card_selection_stripe_payment_card_selection__WEBPACK_IMPORTED_MODULE_0__[\"default\"], '[data-stripe-payment-card-selection]');\nPluginManager.register('StripePaymentSepaSelection', _sepa_selection_stripe_payment_sepa_selection__WEBPACK_IMPORTED_MODULE_1__[\"default\"], '[data-stripe-payment-sepa-selection]');\nPluginManager.register('StripePaymentDigitalWalletSelection', _digital_wallet_selection_stripe_payment_digital_wallet_selection__WEBPACK_IMPORTED_MODULE_2__[\"default\"], '[data-stripe-payment-digital-wallet-selection]'); //Necessary for the webpack hot module reloading server\n\nif (false) {}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicVc5RC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vaG9tZS9mZWxpeC9QaHBzdG9ybVByb2plY3RzL3Nob3B3YXJlLTYvcGx1Z2lucy9TaG9wd2FyZVN0cmlwZVBheW1lbnQvc3JjL1Jlc291cmNlcy9zdG9yZWZyb250L21haW4uanM/MjkzNCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnQgYWxsIG5lY2Vzc2FyeSBTdG9yZWZyb250IHBsdWdpbnMgYW5kIHNjc3MgZmlsZXNcbmltcG9ydCBTdHJpcGVQYXltZW50Q2FyZFNlbGVjdGlvbiBmcm9tICcuL2NhcmQtc2VsZWN0aW9uL3N0cmlwZS1wYXltZW50LmNhcmQtc2VsZWN0aW9uJztcbmltcG9ydCBTdHJpcGVQYXltZW50U2VwYVNlbGVjdGlvbiBmcm9tICcuL3NlcGEtc2VsZWN0aW9uL3N0cmlwZS1wYXltZW50LnNlcGEtc2VsZWN0aW9uJztcbmltcG9ydCBTdHJpcGVQYXltZW50RGlnaXRhbFdhbGxldFNlbGVjdGlvbiBmcm9tICcuL2RpZ2l0YWwtd2FsbGV0LXNlbGVjdGlvbi9zdHJpcGUtcGF5bWVudC5kaWdpdGFsLXdhbGxldC1zZWxlY3Rpb24nO1xuXG4vLyBSZWdpc3RlciB0aGVtIHZpYSB0aGUgZXhpc3RpbmcgUGx1Z2luTWFuYWdlclxuY29uc3QgUGx1Z2luTWFuYWdlciA9IHdpbmRvdy5QbHVnaW5NYW5hZ2VyO1xuUGx1Z2luTWFuYWdlci5yZWdpc3RlcignU3RyaXBlUGF5bWVudENhcmRTZWxlY3Rpb24nLCBTdHJpcGVQYXltZW50Q2FyZFNlbGVjdGlvbiwgJ1tkYXRhLXN0cmlwZS1wYXltZW50LWNhcmQtc2VsZWN0aW9uXScpO1xuUGx1Z2luTWFuYWdlci5yZWdpc3RlcignU3RyaXBlUGF5bWVudFNlcGFTZWxlY3Rpb24nLCBTdHJpcGVQYXltZW50U2VwYVNlbGVjdGlvbiwgJ1tkYXRhLXN0cmlwZS1wYXltZW50LXNlcGEtc2VsZWN0aW9uXScpO1xuUGx1Z2luTWFuYWdlci5yZWdpc3RlcignU3RyaXBlUGF5bWVudERpZ2l0YWxXYWxsZXRTZWxlY3Rpb24nLCBTdHJpcGVQYXltZW50RGlnaXRhbFdhbGxldFNlbGVjdGlvbiwgJ1tkYXRhLXN0cmlwZS1wYXltZW50LWRpZ2l0YWwtd2FsbGV0LXNlbGVjdGlvbl0nKTtcblxuXG4vL05lY2Vzc2FyeSBmb3IgdGhlIHdlYnBhY2sgaG90IG1vZHVsZSByZWxvYWRpbmcgc2VydmVyXG5pZiAobW9kdWxlLmhvdCkge1xuICAgIG1vZHVsZS5ob3QuYWNjZXB0KCk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///qW9D\n");

/***/ })

},[["qW9D","runtime","vendor-node","vendor-shared"]]]);